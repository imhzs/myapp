webpackJsonp([29],{110:function(t,e,r){"use strict";r.d(e,"b",function(){return n}),r.d(e,"d",function(){return o}),r.d(e,"a",function(){return a}),r.d(e,"c",function(){return s});r(0);var n=function(){function t(t){var e=this;this.service=t,this.cards=new Array,this.service.GetCardList(),this.service.currentCards.subscribe(function(t){e.cards=t})}return t.prototype.getPrimaryCard=function(t){var e;return this.cards.forEach(function(r){parseInt(r.type)===t&&parseInt(r.primary)===o&&(e=r)}),e},t.prototype.getCardById=function(t){var e=this.cards.filter(function(e){return e.id==t});return e.length>0?e[0]:{}},t.prototype.filterCard=function(t){return this.cards.filter(function(e){return parseInt(e.type)===t})},t.prototype.setPrimary=function(t,e){var r=this;this.cards.forEach(function(n,a){parseInt(n.type)===t&&(r.cards[a].primary=n.id==e?o.toString():i.toString())}),this.service.updateCards(this.cards)},t.prototype.delCard=function(t){var e=this;this.cards.forEach(function(r,n){r.id===t&&e.cards.splice(n,1)}),this.service.updateCards(this.cards)},t}(),o=1,i=0,a=0,s=1},13:function(t,e,r){"use strict";r.d(e,"a",function(){return d});var n=r(0),o=r(17),i=(r.n(o),r(24)),a=r(71),s=r(92),u=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},d=function(t){Object(n.__extends)(e,t);function e(e){var r=t.call(this,e)||this;return r.http=e,r.App=window.App,r.subject=new o.Subject,r}return Object.defineProperty(e.prototype,"currentUser",{get:function(){return this.subject.asObservable()},enumerable:!0,configurable:!0}),e.prototype.updateUser=function(t){this.subject.next(Object.assign({},t))},e.prototype.Login=function(t,e){var r=this;this.SetParam("mobile",t.toString()),this.SetParam("password",this.Md5T(e).toString()),this.Post("kpay/api/login").subscribe(function(t){r.GetUserData(),App.Nav.push("TabsPage")},function(t){console.log(t)})},e.prototype.GetFindPwdData=function(t,e){return this.SetParam("mobile",t.toString()),this.SetParam("veriCode",e),this.Post("kpay/api/checkPwdVeriCode")},e.prototype.GetResetPwdData=function(t){return this.SetParam("mobile",t.toString()),this.Post("kpay/api/getPwdVericode")},e.prototype.GetchangePsdData=function(t,e,r){return this.SetParam("mobile",t.toString()),this.SetParam("password",this.Md5T(e).toString()),this.SetParam("veriCode",r),this.Post("kpay/api/user/changePassword")},e.prototype.getPwdVericode=function(t){return this.SetParam("mobile",t),this.Post("kpay/api/getPwdVericode")},e.prototype.SignIn=function(t,e,r,n){return this.SetParam("mobile",t.toString()),this.SetParam("password",this.Md5T(e).toString()),this.SetParam("veriCode",r),n&&this.SetParam("referee",n),this.Post("kpay/api/register")},e.prototype.GetVerifyCode=function(t){return this.SetParam("mobile",t.toString()),this.Post("kpay/api/getVericode")},e.prototype.CheckVerifyCode=function(t,e){return this.SetParam("mobile",t.toString()),this.SetParam("veriCode",e),this.Post("kpay/api/checkRegVeriCode")},e.prototype.Logout=function(){s.a.removeToken(),App.UserInfo=null,App.DisableHardwareBackButton(),App.Nav.push(App.RootPage.StartPage)},Object.defineProperty(e.prototype,"IsLogin",{get:function(){return i.a.Assigned(s.a.getToken())},enumerable:!0,configurable:!0}),e.prototype.CheckToken=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.Post("kpay/api/checkToken").toPromise()];case 1:return[2,t.sent()]}})})},e.prototype.ModifyUserInfo=function(t){for(var e in t)this.SetParam(e,t[e]);this.Post("kpay/api/user/modify").subscribe(function(t){console.log(t)})},e.prototype.GetUserData=function(){var t=this;return this.Post("kpay/api/user/info").map(function(e){t.updateUser(e.data)}).subscribe(function(t){},function(t){console.log(t)})},e.prototype.thirdPartyLogin=function(t,e){var r=this;return s.a.setMobile(t),s.a.setSecret(e),this.SetParam("mobile",t),this.SetParam("key",e),this.Post("kpay/api/login/partner").subscribe(function(t){s.a.setToken(t.data.token),r.GetUserData(),App.Nav.setPages([{page:"TabsPage"},{page:"CreditCardPage"}])},function(t){console.error(t)})},e.prototype.thirdPartyReLogin=function(){var t=s.a.getMobile(),e=s.a.getSecret();this.thirdPartyLogin(t,e)},e}(a.a)},169:function(t,e,r){"use strict";r.d(e,"a",function(){return n});r(0);var n=function(){function t(t,e){this.Service=t,this.auth=e,this.App=window.App,this.HeadTitle="选择开户银行"}return t.prototype.ngOnInit=function(){this.Service.GetTolBanks().subscribe(function(t){})},t.prototype.SelectedBank=function(t){App.ActiveView.dismiss({name:t.bankName,code:t.id})},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},170:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0),r(18);var n=r(137),o=function(){function t(t,e,r){this.navParams=t,this.Service=e,this.auth=r,this.App=window.App,this.HeadTitle="选择开户支行",this.BranchList=new Array}return t.prototype.ngOnInit=function(){var t=this;this.BankName=this.navParams.get("Bank"),this.BankCode=this.navParams.get("Code"),this.Service.GetBranchBanks(this.BankName).subscribe(function(e){t.BranchList=e.data}),this.debounced=n.debounce(this.GetKey,500)},t.prototype.GetKey=function(){var t=this;this.Service.GetBranchBanks(this.BankName+","+this.KeyWord).subscribe(function(e){t.BranchList=e.data})},t.prototype.SearchBank=function(){this.debounced()},t.prototype.SelectedBranch=function(t){App.ActiveView.dismiss({name:t.bankName,bankCode:t.bankCode})},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},190:function(t,e){function r(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}r.keys=function(){return[]},r.resolve=r,t.exports=r,r.id=190},217:function(t,e,r){var n={"../pages/auth/auth.module.ngfactory":[433,8],"../pages/findpassword/findpassword.module.ngfactory":[434,7],"../pages/home/addcreditcard/addcreditcard.module.ngfactory":[435,6],"../pages/home/adddeposit/adddeposit.module.ngfactory":[436,5],"../pages/home/branchcard/branchcard.module.ngfactory":[438,20],"../pages/home/cardinfor/cardinfor.module.ngfactory":[437,4],"../pages/home/changecards/changecards.module.ngfactory":[439,10],"../pages/home/checkout/checkout.module.ngfactory":[440,9],"../pages/home/confirminfo/confirminfo.module.ngfactory":[441,21],"../pages/home/creditcard/creditcard.module.ngfactory":[442,3],"../pages/home/finalpay/finalpay.module.ngfactory":[443,19],"../pages/home/home.module.ngfactory":[445,28],"../pages/home/listofbank/listofbank.module.ngfactory":[444,18],"../pages/home/resetpassword/resetpassword.module.ngfactory":[446,2],"../pages/loan/loan.module.ngfactory":[447,24],"../pages/login/login.module.ngfactory":[448,22],"../pages/modifypassword/modifypassword.module.ngfactory":[449,1],"../pages/register/register.module.ngfactory":[450,26],"../pages/setpassword/setpassword.module.ngfactory":[453,0],"../pages/start/start.module.ngfactory":[452,23],"../pages/tabs/tabs.module.ngfactory":[451,25],"../pages/thirdparty/thirdparty.module.ngfactory":[454,27],"../pages/ucenter/VIPmembers/VIPmembers.module.ngfactory":[460,17],"../pages/ucenter/mycard/mycard.module.ngfactory":[456,16],"../pages/ucenter/orders/orders.module.ngfactory":[455,15],"../pages/ucenter/records/records.module.ngfactory":[457,14],"../pages/ucenter/ucenter.module.ngfactory":[458,13],"../pages/ucenter/uinfo/uinfo.module.ngfactory":[459,12],"../pages/ucenter/usetup/usetup.module.ngfactory":[461,11]};function o(t){var e=n[t];return e?r.e(e[1]).then(function(){return r(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}o.keys=function(){return Object.keys(n)},o.id=217,t.exports=o},237:function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n=function(){function t(){}return t.check=function(){if(!App.IsIdAuthed){App.ShowAlert({title:"温馨提示",message:"为了您的资金安全，首次刷卡收款时需要进行身份认证",cssClass:"text-left",buttons:[{text:"取消",role:"cancel",handler:function(){App.Nav.push("HomePage")}},{text:"去认证",handler:function(){App.Nav.push("AuthPage")}}]})}},t}()},24:function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n;!function(t){t.UNDEFINED="undefined",t.BOOLEAN=typeof!0,t.NUMBER="number",t.STRING="string",t.OBJECT=typeof{},t.FUNCTION="function";function e(e){return typeof e!==t.UNDEFINED&&null!==e}t.Assigned=e;t.Defined=function(e){return typeof e!==t.UNDEFINED};t.IsNull=function(e){return typeof e!==t.UNDEFINED&&null===e};t.IsBoolean=function(e){return typeof e===t.BOOLEAN};t.IsNumber=function(e,r){return void 0===r&&(r=!0),typeof e===t.NUMBER&&(r||!isNaN(e))};t.IsTrueNaN=function(e){return typeof e===t.NUMBER&&isNaN(e)};function r(e){return typeof e===t.STRING}t.IsString=r;function n(e){switch(typeof e){case t.BOOLEAN:case t.STRING:case t.NUMBER:case t.UNDEFINED:return!0;case t.OBJECT:return null===e}return!1}t.IsPrimitive=n;function o(e){return typeof e===t.FUNCTION}t.IsFunction=o;t.IsObject=function(e,r){return void 0===r&&(r=!1),typeof e===t.OBJECT&&(r||null!==e)};t.IsEmptyObject=function(t,e){return void 0===e&&(e=!1),this.IsObject(t,e)&&"{}"===JSON.stringify(t)};t.IsArrayLike=function(t){return e(t)&&(t instanceof Array||r(t)||!o(t)&&i(t,"length"))};t.ZeroArray=function(t){if(t.fill)t.fill(0);else for(var e=0;e<t.length;e++)t[e]=0};t.ArrayCopy=function(t,e,r,n,o){if(void 0===o&&(o=0),e.subarray&&t.subarray)t.set(e.subarray(r,r+n),o);else for(var i=0;i<n;i++)t[o+i]=e[r+i]};t.NumberOrNaN=function(t){return isNaN(t)?NaN:t};function i(t,r){return e(t)&&!n(t)&&r in t}t.HasMember=i;t.HasMemberOfType=function(t,e,r){return i(t,e)&&typeof t[e]===r};t.Create=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return new t(e)};t.Sealed=function(){return function(t){Object.seal(t),Object.seal(t.prototype)}};t.StaticImplements=function(){return function(t){}}}(n||(n={})),Object.freeze(n)},26:function(t,e,r){"use strict";r.d(e,"a",function(){return u});var n=r(0),o=r(17),i=(r.n(o),r(71)),a=r(92),s=r(137),u=function(t){Object(n.__extends)(e,t);function e(e){var r=t.call(this,e)||this;return r.http=e,r.subject=new o.Subject,r}return e.prototype.VerifyId=function(t,e,r){return this.SetParam("idcardNo",t),this.SetParam("name",e),r&&this.SetParam("mobile",r),this.Post("kpay/api/idcard/auth")},e.prototype.GetProfitToday=function(){return this.Post("kpay/api/user/myprofit/today")},e.prototype.GetCardList=function(){var t=this;return this.Post("kpay/api/bankcard/list").map(function(e){t.updateCards(e.data)}).subscribe(function(t){},function(t){console.log(t)})},Object.defineProperty(e.prototype,"currentCards",{get:function(){return this.subject.asObservable()},enumerable:!0,configurable:!0}),e.prototype.updateCards=function(t){this.subject.next(s.concat(new Array,t))},e.prototype.SetPrimCard=function(t){return this.SetParam("cardId",t),this.Post("kpay/api/bankcard/setPrimary")},e.prototype.AddCreditCard=function(t,e){return this.SetParam("cardNo",t),this.SetParam("mobile",e),this.Post("kpay/api/bankcard/addCredit")},e.prototype.AddDeposiCard=function(t,e,r,n,o){return this.SetParam("cardNo",t),this.SetParam("bankName",e),this.SetParam("bankNo",r),this.SetParam("branchName",n),this.SetParam("mobile",o),this.Post("kpay/api/bankcard/addDeposit")},e.prototype.DelCard=function(t){return this.SetParam("cardId",t),this.Post("kpay/api/bankcard/del")},e.prototype.GetTolBanks=function(){return this.Post("kpay/api/bank/info")},e.prototype.GetBranchBanks=function(t){return this.SetParam("name",t),this.Post("kpay/api/bank/list")},e.prototype.GetAvaCash=function(t){return this.SetParam("amount",t),this.Post("kpay/api/cash/cashback/available")},e.prototype.GetBankPage=function(t,e,r,n){return this.SetParam("cardId",t),this.SetParam("enterCardId",e),this.SetParam("amount",Math.round(100*r)),this.SetParam("token",a.a.getToken()),n&&this.SetParam("cashbackId",n),this.Post("kpay/api/trade/quickPay/request")},e.prototype.GetVerifyode=function(t,e,r,n,o,i){return this.SetParam("acctNo",t),this.SetParam("cvn2",e),this.SetParam("amount",Math.round(100*o)),this.SetParam("mobile",n),this.SetParam("expDate",r),i&&this.SetParam("cashbackId",i),this.Post("kpay/api/trade/quickPay/sendVericode")},e.prototype.ConfirmResult=function(t,e){return this.SetParam("orderNo",t),this.SetParam("smsCode",e),this.Post("kpay/api/trade/quickPay/confirm")},e}(i.a)},271:function(t,e,r){"use strict";r.d(e,"a",function(){return a});r(0);var n=r(15),o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=function(){function t(t,e,r){this.fileService=t,this.service=e,this.auth=r,this.CardFront="idcard_front",this.CardBack="idcard_back",this.ExampleFront="",this.ExampleBank="",this.HeadTitle="身份认证",this.PreviewFiles={back:"",front:""},this.DefaultImg="assets/imgs/zhengm.png",this.PreviewFiles[this.CardFront]=this.PreviewFiles[this.CardBack]=this.DefaultImg}return t.prototype.ngOnInit=function(){this.formGroup=new n.g({idCardNo:this.idCardNo=new n.e("",[n.s.required,n.s.pattern(/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/)]),username:this.username=new n.e("",[n.s.required,n.s.minLength(2)])})},t.prototype.OnChangeFile=function(t,e){var r=this;console.log(t),this.fileService.showAddImage().then(function(e){r.PreviewFiles[t]=e.base64,r.ouploadFile(t,e.file)}).catch(function(t){console.log(t)})},t.prototype.ouploadFile=function(t,e){return o(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:return[4,this.fileService.IdentityAuth(e,t)];case 1:return!1!==(r=n.sent())&&t==this.CardFront&&(this.idCardNo.setValue(r.idno),this.username.setValue(r.name)),[2]}})})},t.prototype.OnSubmit=function(){var t=this;this.service.VerifyId(this.formGroup.value.idCardNo,this.formGroup.value.username).subscribe(function(e){t.auth.GetUserData(),App.Nav.push("CreditCardPage")},function(t){console.log(t)})},t.prototype.ionViewCanEnter=function(){return this.auth.CheckToken(),!App.IsIdAuthed},t}()},272:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0);var n=r(15),o=function(){function t(t){this.Service=t,this.App=window.App,this.HeadTitle="找回密码",this.VCodeText="获取验证码"}return t.prototype.ngOnInit=function(){this.formGroup=new n.g({tel:this.tel=new n.e("",[n.s.required,n.s.pattern(/^1[3|4|5|7|8][0-9]{9}$/)]),VCode:this.VCode=new n.e("",[n.s.required,n.s.minLength(4)])})},t.prototype.times=function(){var t=this,e=60,r=setInterval(function(){e>0&&(t.VCodeText=--e+"s后重新获取",0===e&&(t.VCodeText="重新获取",clearInterval(r)))},1e3)},t.prototype.GetCode=function(){this.Service.GetResetPwdData(this.formGroup.value.tel).subscribe(function(t){console.log(t)},function(t){console.log(t)})},t.prototype.GetTelCode=function(){this.Service.GetFindPwdData(this.formGroup.value.tel,this.formGroup.value.VCode)},Object.defineProperty(t.prototype,"FindDisabled",{get:function(){return!(!this.tel.invalid&&!this.VCode.invalid)},enumerable:!0,configurable:!0}),t}()},273:function(t,e,r){"use strict";r.d(e,"a",function(){return c});r(0);var n=r(15),o=(r(18),r(24)),i=r(62),a=r(237),s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=function(){function t(t,e,r,n){this.Service=t,this.navParams=e,this.auth=r,this.fileService=n,this.App=window.App,this.HeadTitle="添加信用卡",this.AddWrong=!1,this.WrongMsg="",this.BankCardFront=i.a,o.a.Assigned(App.UserInfo)&&!o.a.IsEmptyObject(App.UserInfo)&&this.GetIdCard(App.UserInfo.idCardNo)}return t.prototype.ngOnInit=function(){this.formGroup=new n.g({CardNo:this.CardNo=new n.e("",[n.s.required,n.s.minLength(16)]),Mobile:this.Mobile=new n.e("",[n.s.required,n.s.pattern(/^1[3|4|5|7|8][0-9]{9}$/)])})},t.prototype.ionViewDidEnter=function(){a.a.check()},Object.defineProperty(t.prototype,"CompleteBtnIsDisabled",{get:function(){return!(!this.CardNo.invalid&&!this.Mobile.invalid)},enumerable:!0,configurable:!0}),t.prototype.GetIdCard=function(t){if(o.a.Assigned(t)){this.ShowIDCard=t.substr(0,6);for(var e=0;e<t.length-10;e++)this.ShowIDCard+="*";this.ShowIDCard+=t.substr(-4)}},t.prototype.AddCard=function(){var t=this;this.Service.AddCreditCard(this.formGroup.value.CardNo,this.formGroup.value.Mobile).subscribe(function(e){t.Service.GetCardList(),t.auth.GetUserData(),t.auth.currentUser.subscribe(function(e){t.navParams.get("page")?App.Nav.push(t.navParams.get("page")):App.Nav.push("MyCardPage")})})},t.prototype.OnChangeFile=function(t){var e=this;this.fileService.showAddImage().then(function(t){console.log(t),e.uploadFile(t.file,i.a)}).catch(function(t){console.log(t)})},t.prototype.uploadFile=function(t,e){return s(this,void 0,void 0,function(){var r;return u(this,function(n){switch(n.label){case 0:return[4,this.fileService.OcrUpload("file",t,e)];case 1:return!1!==(r=n.sent())&&this.CardNo.setValue(r.cardNo.replace(/\s*/g,"")),[2]}})})},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},274:function(t,e,r){"use strict";r.d(e,"a",function(){return h});r(0);var n=r(15),o=(r(18),r(24)),i=r(62),a=r(169),s=r(170),u=r(237),c=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},d=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},h=function(){function t(t,e,r,n){var o=this;this.Service=t,this.navParams=e,this.auth=r,this.fileService=n,this.HeadTitle="添加储蓄卡",this.BankName="请选择开户银行",this.BranchName="请选择具体开户支行",this.BranchCode="",this.TranCode="",this.BranchList=[],this.BankCode="",this.BankCardFront=i.a,this.App=window.App,this.GetIdCard(App.UserInfo.idCardNo),this.auth.currentUser.subscribe(function(t){o.GetIdCard(App.UserInfo.idCardNo)})}return t.prototype.ngOnInit=function(){this.formGroup=new n.g({CardNo:this.CardNo=new n.e("",[n.s.required,n.s.minLength(16)]),Mobile:this.Mobile=new n.e("",[n.s.required,n.s.pattern(/^1[3|4|5|7|8][0-9]{9}$/)])})},t.prototype.ionViewDidEnter=function(){u.a.check()},Object.defineProperty(t.prototype,"CompleteBtnIsDisabled",{get:function(){return!!this.CardNo.invalid},enumerable:!0,configurable:!0}),t.prototype.GetIdCard=function(t){if(o.a.Assigned(t)){this.IdCard=t.substr(0,6);for(var e=0;e<t.length-10;e++)this.IdCard+="*";this.IdCard+=t.substr(-4)}},t.prototype.ClickOpenBank=function(){var t=this;if(this.CardNo.invalid)return App.ShowError("请先输入银行卡卡号");App.ShowModal(a.a).then(function(e){e.onDidDismiss(function(e){e&&(t.BankName=e.name,t.BankCode=e.code,t.BranchCode="",t.BranchName="请选择具体开户支行")})})},t.prototype.ClickBranchBank=function(){var t=this;if(!this.BankCode)return App.ShowError("请先选择开户银行");App.ShowModal(s.a,{Bank:this.BankName,Code:this.BankCode}).then(function(e){e.onDidDismiss(function(e){e&&(t.BranchName=e.name,t.BranchCode=t.BankCode,t.TranCode=e.bankCode)})})},t.prototype.Finish=function(){var t=this;this.Service.AddDeposiCard(this.formGroup.value.CardNo,this.BankName,this.TranCode,this.BranchName,this.formGroup.value.Mobile).subscribe(function(e){t.Service.GetCardList(),t.auth.GetUserData(),t.auth.currentUser.subscribe(function(e){t.navParams.get("page")?App.Nav.push(t.navParams.get("page")):App.Nav.push("MyCardPage")})})},t.prototype.onChangeFile=function(t,e){var r=this;this.fileService.showAddImage().then(function(e){r.uploadFile(e.file,t)}).catch(function(t){console.log(t)})},t.prototype.uploadFile=function(t,e){return c(this,void 0,void 0,function(){var r;return d(this,function(n){switch(n.label){case 0:return[4,this.fileService.OcrUpload("file",t,e)];case 1:return r=n.sent(),o.a.Assigned(r)&&o.a.IsObject(r)&&(this.CardNo.setValue(r.cardNo.replace(/\s*/g,"")),this.BankName=r.bank,this.BankCode="105"),[2]}})})},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},275:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0),r(18);var n=r(15),o=function(){function t(t,e){this.navParams=t,this.Service=e,this.App=window.App,this.HeadTitle="确认信息",this.VCodeText="获取验证码",this.State=0,this.ShowFront=!1,this.ShowBack=!1,this.Voucher=[],this.Params={InputAmount:this.navParams.get("OutAmount"),OutputAmount:this.navParams.get("InAmount"),CreditCard:this.navParams.get("CreditCard"),DepositCard:this.navParams.get("DepositCard"),Code:this.navParams.get("Code"),CreditCode:this.navParams.get("CreditCode"),DepositCode:this.navParams.get("DepositCode"),Mobile:this.navParams.get("Mobile")}}return t.prototype.ngOnInit=function(){this.Form_Group_Info=new n.g({CVN:this.CVN=new n.e("",[n.s.required,n.s.minLength(3)]),CardDate:this.CardDate=new n.e("",[n.s.required,n.s.minLength(4)]),VerifyCode:this.VerifyCode=new n.e("",[n.s.required,n.s.minLength(6)])}),this.GetAvaCash()},t.prototype.times=function(){var t=this,e=60,r=setInterval(function(){e>0&&(t.VCodeText="已发送"+--e+"s",0===e&&(t.VCodeText="重新获取",t.State=0,clearInterval(r)))},1e3)},t.prototype.GetAvaCash=function(){this.Service.GetAvaCash(this.Params.OutputAmount).subscribe(function(t){})},Object.defineProperty(t.prototype,"VCodeBtnIsDisabled",{get:function(){return!(!this.CVN.invalid&&!this.CardDate.invalid)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompleteBtnIsDisabled",{get:function(){return!!(this.CVN.invalid||this.CardDate.invalid||this.VerifyCode.invalid)},enumerable:!0,configurable:!0}),t.prototype.GetVerifyCode=function(){var t=this;this.VoucherId?this.Service.GetVerifyode(this.Params.Code,this.Form_Group_Info.value.CVN,this.Form_Group_Info.value.CardDate,this.Params.Mobile,this.Params.OutputAmount,this.VoucherId).subscribe(function(e){t.times()}):this.Service.GetVerifyode(this.Params.Code,this.Form_Group_Info.value.CVN,this.Form_Group_Info.value.CardDate,this.Params.Mobile,this.Params.OutputAmount).subscribe(function(e){t.times()})},t.prototype.ConfirmCode=function(){var t=this;this.OrderNo?this.Service.ConfirmResult(this.OrderNo,this.Form_Group_Info.value.VerifyCode).subscribe(function(e){App.Nav.push(App.RootPage.ConfirminfoPage,{InCard:t.Params.DepositCard,FinalAmount:t.Params.InputAmount,CardCode:t.Params.DepositCode})}):App.ShowError("验证码输入不正确")},t.prototype.ShowBackEmp=function(){this.ShowBack=!0},t.prototype.ShowFrontEmp=function(){this.ShowFront=!0},t.prototype.CloseCard=function(){this.ShowBack=this.ShowFront=!1},t.prototype.ClickUserVoucher=function(){},t.prototype.ClickUserChosen=function(){},t}()},276:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0),r(18);var n=r(110),o=function(){function t(t,e,r,n){this.Service=t,this.navParams=e,this.viewCtrl=r,this.auth=n,this.HeadTitle="我的信用卡",this.Cards=new Array,console.log(this.navParams.get("curCardId")),this.CheckedCardId=this.navParams.get("curCardId"),this.Cards=this.navParams.get("data"),this.CardType=this.navParams.get("t")}return t.prototype.AddCards=function(){this.CardType===n.a?App.Nav.push("AddCreditCardPage",{page:"CreditCardPage"}):this.CardType===n.c&&App.Nav.push("AddDepositPage",{page:"CreditCardPage"})},t.prototype.OnConfirmCard=function(){console.log(this.CheckedCardId);this.viewCtrl.dismiss({id:this.CheckedCardId})},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},277:function(t,e,r){"use strict";r.d(e,"a",function(){return i});r(0),r(18);var n=r(152),o=r(24),i=function(){function t(t,e,r){this.navParams=t,this.service=e,this.auth=r,this.HeadTitle="确认收款",this.CanSubmited=!0,this.Amount=this.navParams.get("amount"),o.a.Assigned(this.Amount)||o.a.IsObject(this.Amount)||App.Nav.push("CreditCardPage"),this.CreditCard=this.navParams.get("creditCard"),this.DepositCard=this.navParams.get("depositCard")}return t.prototype.ionViewDidEnter=function(){this.CanSubmited=!0},t.prototype.Pay=function(){var t=this;this.CanSubmited=!1,this.service.GetBankPage(this.CreditCard.id,this.DepositCard.id,this.Amount.inputAmount).subscribe(function(t){/^[http:\/\/|https:\/\/](.*)?/.test(t)?(new n.a).create(encodeURI(t)):-1==t.indexOf("<html>")?App.ShowError(t.respMsg):App.Nav.push(App.RootPage.FinalpayPage,{innerHtml:t})},function(e){t.CanSubmited=!0})},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},278:function(t,e,r){"use strict";r.d(e,"a",function(){return n});r(0),r(18);var n=function(){return function(t){this.navParams=t,this.App=window.App,this.CardInfo=this.navParams.get("InCard"),this.Amount=this.navParams.get("FinalAmount"),this.CardCode=this.navParams.get("CardCode")}}()},279:function(t,e,r){"use strict";r.d(e,"a",function(){return i});r(0),r(18);var n=r(24),o=r(110),i=function(){function t(t,e,r,o){var i=this;this.navCtrl=t,this.cardHelper=e,this.auth=r,this.homeService=o,this.App=window.App,this.CreditCards=new Array,this.DepositCards=new Array,this.HeadTitle="刷卡提现",this.ShowFlow=!1,this.amount={inputAmount:void 0,outputAmount:void 0},n.a.Assigned(App.UserInfo)&&!n.a.IsEmptyObject(App.UserInfo)&&(this.Rate=App.UserInfo.rate,App.IsIdAuthed||(this.ShowFlow=!0)),this.homeService.currentCards.subscribe(function(t){i.InitData()}),this.auth.currentUser.subscribe(function(t){i.Rate=t.rate,App.IsIdAuthed||(i.ShowFlow=!0)})}return t.prototype.ionViewDidEnter=function(){this.InitData()},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t.prototype.InitData=function(){this.CreditCards=this.cardHelper.filterCard(o.a),this.DepositCards=this.cardHelper.filterCard(o.c),this.CurrentCreditCard=this.cardHelper.getPrimaryCard(o.a),this.CurrentDepositCard=this.cardHelper.getPrimaryCard(o.c),!n.a.Assigned(this.CurrentCreditCard)&&this.CreditCards.length>0&&(this.CurrentCreditCard=this.CreditCards[0]),!n.a.Assigned(this.CurrentDepositCard)&&this.DepositCards.length>0&&(this.CurrentCreditCard=this.DepositCards[0])},t.prototype.OnCahngeInputAmount=function(){this.amount.outputAmount=this.amount.inputAmount?Math.floor(this.amount.inputAmount*(1-this.Rate/100)*10)/10:void 0},t.prototype.ConfirmPay=function(){var t=(new Date).getHours();t<9||t>22?App.ShowError("交易时间为9:00-22:00"):0!=this.CreditCards.length&&0!=this.DepositCards.length?(this.OnCahngeInputAmount(),this.navCtrl.push("CheckoutPage",{creditCard:this.CurrentCreditCard,depositCard:this.CurrentDepositCard,amount:this.amount})):App.ShowError("请先添加银行卡和储蓄卡")},t.prototype.ChangeCreditCard=function(){var t=this;App.ShowModal("ChangecardsPage",{data:this.CreditCards,t:o.a,curCardId:this.CurrentCreditCard.id}).then(function(e){e.onDidDismiss(function(e){n.a.Assigned(e)&&n.a.IsObject(e)&&(t.CurrentCreditCard=t.cardHelper.getCardById(e.id))})})},t.prototype.ChangeDepositCard=function(){var t=this;App.ShowModal("ChangecardsPage",{data:this.DepositCards,t:o.c,curCardId:this.CurrentDepositCard.id}).then(function(e){e.onDidDismiss(function(e){n.a.Assigned(e)&&n.a.IsObject(e)&&(console.log(e.id),t.CurrentDepositCard=t.cardHelper.getCardById(e.id))})})},t.prototype.AddCreditCard=function(){this.navCtrl.push("AddCreditCardPage")},t.prototype.AddDepositCard=function(){this.navCtrl.push("AddDepositPage")},t.prototype.OnCloseFlow=function(){this.ShowFlow=!1},Object.defineProperty(t.prototype,"CanGoNext",{get:function(){return n.a.IsObject(this.CurrentCreditCard)&&n.a.IsObject(this.CurrentDepositCard)&&this.amount.inputAmount>100},enumerable:!0,configurable:!0}),t}()},280:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0),r(18);var n=r(318),o=(r.n(n),function(){function t(t,e,r){this.navParams=t,this.sanitizer=e,this.auth=r,this.headTitle="银联支付",this.browser={isLoaded:!1,proObj:null,progress:0,secUrl:"",title:"加载中",url:"",share:null},this.flag=!0,this.this_html="",this.htmltext="",this.formAction="",this.shareConfig={isShow:!1}}return t.prototype.ngOnInit=function(){var t=this.navParams.get("innerHtml").toString();if(-1==t.indexOf("form")&&t.indexOf("body")>-1){this.flag=!1;var e=t.match(/<body[^>]*>(.*)?<\/body>/)[1];e=this.sanitizer.bypassSecurityTrustHtml(e),this.this_html=e}else if(t.indexOf("form")>-1){this.flag=!0;var r=t.match(/<form[^>]*>(.*)?<\/form>/),n=r[1];this.formAction=this.getFormAction(r[0]),n=this.sanitizer.bypassSecurityTrustHtml(n),this.htmltext=n}var o=this.navParams.get("browser");o?(this.flag=!1,this.browser.title=o.title,this.browser.url=o.url,this.browser.secUrl=this.sanitizer.bypassSecurityTrustResourceUrl(o.url),o.share&&(this.browser.share=o.share)):this.browser.secUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.browser.url),this.reload()},t.prototype.ionViewDidEnter=function(){this.flag&&this.paymentForm.nativeElement.submit(),this.browser.proObj||(this.browser.proObj=document.getElementById("progress")),this.onprogress()},t.prototype.random=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t.prototype.onprogress=function(){var t=this,e=this.random(10,30),r=Object(n.setTimeout)(function(){t.browser.isLoaded?(t.browser.proObj.style.width="100%",Object(n.clearTimeout)(r)):(t.browser.progress+=t.random(1,5),t.browser.progress>90&&(t.browser.progress=90),t.browser.proObj.style.width=t.browser.progress+"%",t.onprogress())},e)},t.prototype.loaded=function(){this.browser.isLoaded=!0},t.prototype.reload=function(){var t=this,e=this.browser.title,r=this.browser.secUrl;this.browser.title="加载中",this.browser.secUrl=this.sanitizer.bypassSecurityTrustResourceUrl(""),Object(n.setTimeout)(function(){t.browser.isLoaded=!1,t.browser.progress=0,t.browser.proObj||(t.browser.proObj=document.getElementById("progress")),t.onprogress(),t.browser.title=e,t.browser.secUrl=r},10)},t.prototype.getFormAction=function(t){var e=t.match(new RegExp(/action=['|"]([^'|"]*)/));return e.length>1?e[1]:""},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}())},281:function(t,e,r){"use strict";r.d(e,"a",function(){return n});r(0),r(18);var n=function(){return function(){this.App=window.App}}()},282:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0);var n=r(15),o=(r(18),function(){function t(t,e){this.auth=t,this.navParams=e,this.App=window.App,this.HeadTitle="重置密码",this.tel=this.navParams.get("mobile"),this.VCode=this.navParams.get("code")}return t.prototype.ngOnInit=function(){this.formGroup=new n.g({pwd:this.pwd=new n.e("",[n.s.required,n.s.minLength(6)])})},t.prototype.clickgetlogin=function(){this.conpwd===this.formGroup.value.pwd?this.auth.GetchangePsdData(this.tel,this.formGroup.value.pwd,this.VCode):App.ShowError("两次输入密码不一致")},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}())},283:function(t,e,r){"use strict";r.d(e,"a",function(){return n});r(0);var n=function(){function t(t){this.sanitizer=t,this.browser={isLoaded:!1,proObj:null,progress:0,secUrl:"",title:"加载中",url:"",share:null},this.shareConfig={isShow:!1};var e="http://www.werunpay.com/h5/carefreeFinance-ibox/index.html?source=1124";this.browser.title="借贷",this.browser.url=e,this.browser.secUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e),this.reload()}return t.prototype.ionViewDidLoad=function(){this.browser.proObj||(this.browser.proObj=document.getElementById("progress")),this.onprogress()},t.prototype.random=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t.prototype.onprogress=function(){var t=this,e=this.random(10,30),r=setTimeout(function(){if(t.browser.isLoaded)return t.browser.proObj.style.width="100%",void clearTimeout(r);t.browser.progress+=t.random(1,5),t.browser.progress>90&&(t.browser.progress=90),t.browser.proObj.style.width=t.browser.progress+"%",t.onprogress()},e)},t.prototype.loaded=function(){this.browser.isLoaded=!0},t.prototype.presentPopover=function(t){var e=this},t.prototype.reload=function(){var t=this,e=this.browser.title,r=this.browser.secUrl;this.browser.title="加载中",this.browser.secUrl=this.sanitizer.bypassSecurityTrustResourceUrl(""),setTimeout(function(){t.browser.isLoaded=!1,t.browser.progress=0,t.browser.proObj||(t.browser.proObj=document.getElementById("progress")),t.onprogress(),t.browser.title=e,t.browser.secUrl=r},10)},t.prototype.share=function(){this.shareConfig.isShow=!0},t}()},284:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0);var n=r(15),o=(r(18),function(){function t(t,e){this.auth=t,this.navParams=e,this.App=window.App,this.auth.thirdPartyLogin(this.navParams.get("mobile"),this.navParams.get("key"))}return t.prototype.ngOnInit=function(){this.formGroup=new n.g({Tel:this.Tel=new n.e("",[n.s.required,n.s.pattern(/^1[3|4|5|7|8][0-9]{9}$/)]),Pass:this.Pass=new n.e("",[n.s.required,n.s.minLength(6)])})},Object.defineProperty(t.prototype,"LoginDisabled",{get:function(){return!(!this.Tel.invalid&&!this.Pass.invalid)},enumerable:!0,configurable:!0}),t.prototype.Login=function(){this.auth.Login(this.formGroup.value.Tel,this.formGroup.value.Pass)},t}())},285:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0);var n=r(15),o=function(){function t(t){this.Service=t,this.App=window.App,this.HeadTitle="修改密码",this.VCodeText="获取验证码",this.pwdVisible=!1,this.tel="****"}return t.prototype.ngOnInit=function(){App.UserInfo.mobile&&(this.tel=App.UserInfo.mobile.toString().substr(0,3)+this.tel+App.UserInfo.mobile.toString().substr(-4)),this.FormGroup=new n.g({VCode:this.VCode=new n.e("",[n.s.required,n.s.minLength(4)]),Password:this.Password=new n.e("",[n.s.required,n.s.minLength(6)])})},t.prototype.times=function(){var t=this,e=60,r=setInterval(function(){e>0&&(t.VCodeText=--e+"s后重新获取",0===e&&(t.VCodeText="重新获取",clearInterval(r)))},1e3)},t.prototype.GetTelCode=function(){this.Service.getPwdVericode(App.UserInfo.mobile).subscribe(function(t){})},Object.defineProperty(t.prototype,"ConfirmBtnIsDisabled",{get:function(){return!(!this.VCode.invalid&&!this.Password.invalid)},enumerable:!0,configurable:!0}),t.prototype.ConfirmModify=function(){this.Service.GetchangePsdData(App.UserInfo.mobile,this.FormGroup.value.Password,this.FormGroup.value.VCode)},t}()},286:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0);var n=r(15),o=function(){function t(t){this.Service=t,this.App=window.App,this.State=0,this.VCodeText="获取验证码"}return t.prototype.ngOnInit=function(){this.formGroup=new n.g({Tel:this.Tel=new n.e("",[n.s.required,n.s.pattern(/^1[3|4|5|7|8][0-9]{9}$/)]),VCode:this.VCode=new n.e("",[n.s.required,n.s.minLength(4)])})},t.prototype.times=function(){var t=this,e=60,r=setInterval(function(){e>0&&(t.VCodeText="已发送"+--e+"s",0===e&&(t.VCodeText="重新获取",t.State=0,clearInterval(r)))},1e3)},t.prototype.GetVeriyCode=function(){this.Service.GetVerifyCode(this.formGroup.value.Tel).subscribe(function(t){console.log(t)})},t.prototype.NextTable=function(){this.Service.CheckVerifyCode(this.formGroup.value.Tel,this.formGroup.value.VCode).subscribe(function(t){console.log(t)})},t}()},287:function(t,e,r){"use strict";r.d(e,"a",function(){return n});r(0);var n=function(){return function(){this.App=window.App,this.tab1Root="HomePage",this.tab2Root="LoanPage",this.tab4Root="UcenterPage"}}()},288:function(t,e,r){"use strict";r.d(e,"a",function(){return n});r(0);var n=function(){return function(){this.App=window.App}}()},289:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0);var n=r(15),o=(r(18),function(){function t(t,e){this.Service=t,this.navParams=e,this.App=window.App,this.PassClear=!1,this.PassWord="",this.ConPassWord="",this.PassWordType="password",this.HeadTitle="设定密码",this.Tel=this.navParams.get("mobile"),this.VCode=this.navParams.get("code")}return t.prototype.ngOnInit=function(){this.formGroup=new n.g({Pass:this.Pass=new n.e("",[n.s.required,n.s.minLength(6)])})},t.prototype.PassType=function(){console.log(this.PassClear),this.PassClear=!this.PassClear,this.PassWordType=this.PassClear?"text":"password"},Object.defineProperty(t.prototype,"ResIsDisabled",{get:function(){return!!this.Pass.invalid},enumerable:!0,configurable:!0}),t.prototype.OnRegister=function(){this.ConPassWord==this.PassWord?this.Service.SignIn(this.Tel,this.formGroup.value.Pass,this.VCode):App.ShowError("两次输入的密码不一致")},t}())},290:function(t,e,r){"use strict";r.d(e,"a",function(){return n});r(0),r(18);var n=function(){function t(t,e,r){this.navParams=t,this.Service=e,this.auth=r,this.HeadTitle="订单详情",this.OrderDetail={};this.GetCashDetail(t.data)}return t.prototype.GetCashDetail=function(t){var e=this;this.Service.GetCashDetail(t).subscribe(function(t){return e.OrderDetail=t.data})},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},291:function(t,e,r){"use strict";r.d(e,"a",function(){return a});r(0);var n=r(110),o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=function(){function t(t,e,r,o){var i=this;this.Servie=t,this.auth=e,this.navCtrl=r,this.cardHelper=o,this.App=window.App,this.HeadTitle="我的卡片",this.CreditCards=new Array,this.DepositCards=new Array,this.CardSwitch=n.a,this.CreditCard=n.a,this.DepositCard=n.c,this.PrimaryCard=n.d,this.CreditCards=this.cardHelper.filterCard(n.a),this.DepositCards=this.cardHelper.filterCard(n.c),this.Servie.currentCards.subscribe(function(t){i.CreditCards=i.cardHelper.filterCard(n.a),i.DepositCards=i.cardHelper.filterCard(n.c)})}return t.prototype.DelCreditCard=function(t){var e=this;this.Servie.DelCard(t).subscribe(function(r){e.cardHelper.delCard(t),e.CreditCards=e.cardHelper.filterCard(n.a),App.ShowToast("信用卡删除成功"),e.auth.GetUserData()})},t.prototype.DelDepositCard=function(t){var e=this;this.Servie.DelCard(t).subscribe(function(r){e.cardHelper.delCard(t),e.DepositCards=e.cardHelper.filterCard(n.c),App.ShowToast("储蓄卡删除成功"),e.auth.GetUserData()})},t.prototype.SetPrimaryCard=function(t,e){return o(this,void 0,void 0,function(){var r=this;return i(this,function(o){return this.Servie.SetPrimCard(e).subscribe(function(o){r.cardHelper.setPrimary(t,e),r.CreditCards=r.cardHelper.filterCard(n.a),r.DepositCards=r.cardHelper.filterCard(n.c)}),[2]})})},t.prototype.AddCreditCard=function(){App.Nav.push("AddCreditCardPage",{page:"MyCardPage"})},t.prototype.AddDepositCard=function(){App.Nav.push("AddDepositPage",{page:"MyCardPage"})},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},292:function(t,e,r){"use strict";r.d(e,"a",function(){return n});r(0);var n=function(){function t(t,e){this.Service=t,this.auth=e,this.App=window.App,this.HeadTitle="收款记录",this.GetCashList()}return t.prototype.GetCashList=function(){var t=this;this.Service.GetCashList().subscribe(function(e){return t.DataProcess(e.data)})},t.prototype.DataProcess=function(t){if(0==t.length)return this.DataEmpty=!0;this.DataEmpty=!1,this.ListData=new Array;var e=t[0].time.split(" ")[0].substr(0,7);this.ListData=[{month:e,total:0,data:[]}];for(var r=0;r<t.length;r++){var n=t[r];if(e==t[r].time.split(" ")[0].substr(0,7))for(var o=0;o<this.ListData.length;o++)this.ListData[o].month==e&&(this.ListData[o].data.push(n),"1"==n.status&&(this.ListData[o].total+=Number(n.amount)));else e=t[r].time.split(" ")[0].substr(0,7),this.ListData.push({month:e,total:n.amount,data:[n]})}},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},293:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0);var n=r(24),o=function(){function t(t){var e=this;this.auth=t,this.App=window.App,this.User={},this.HeadTitle="我 的",this.Mobile="****",this.ImgData={ImgSrc:void 0},n.a.Assigned(App.UserInfo)&&!n.a.IsEmptyObject(App.UserInfo)&&(this.User=App.UserInfo,this.formatMobile()),this.auth.currentUser.subscribe(function(t){e.User=t,e.formatMobile()})}return t.prototype.formatMobile=function(){this.Mobile=App.UserInfo.mobile.toString().substr(0,3)+this.Mobile+App.UserInfo.mobile.toString().substr(-4)},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},294:function(t,e,r){"use strict";r.d(e,"a",function(){return o});r(0);var n=r(24),o=function(){function t(t){var e=this;this.auth=t,this.App=window.App,this.ImgData={ImgSrc:void 0},this.HeadTitle="个人资料",this.UserInfo=[],this.ShowPhone="****",this.ShowID="********",this.infoName=" ",n.a.Assigned(App.UserInfo)&&!n.a.IsEmptyObject(App.UserInfo)&&this.InitUserInfo(),this.auth.currentUser.subscribe(function(t){e.InitUserInfo()})}return t.prototype.InitUserInfo=function(){if(this.UserInfo=App.UserInfo,null!==this.UserInfo.mobile&&(this.ShowPhone=this.UserInfo.mobile.substr(0,3)+this.ShowPhone+this.UserInfo.mobile.substr(-4)),null!==this.UserInfo.idCardNo&&(this.ShowID=this.UserInfo.idCardNo.substr(0,6)+this.ShowID+this.UserInfo.idCardNo.substr(-4)),this.ImgData.ImgSrc=App.UserFace,null!==this.UserInfo.name){this.infoName=this.UserInfo.name.substr(-1);for(var t="",e=0;e<this.UserInfo.name.length-1;e++)t+="*";this.infoName=t+this.infoName}},t.prototype.ChangeNickName=function(){var t=this;App.ShowAlert({title:"昵称",inputs:[{name:"nickName",value:this.UserInfo.nickName}],buttons:[{text:"取消"},{text:"保存",handler:function(e){t.UserInfo.nickName=e.nickName,t.auth.ModifyUserInfo({nickName:e.nickName})}}]}).then(function(t){return t.onDidDismiss(function(){})})},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},295:function(t,e,r){"use strict";r.d(e,"a",function(){return n});r(0);var n=function(){function t(t,e){this.Service=t,this.auth=e,this.App=window.App,this.HeadTitle="我的费率",this.VipIndex=0,this.GetVipDeadLine(10)}return t.prototype.ngOnInit=function(){var t=this;this.Service.GetVipList().subscribe(function(e){t.VipList=e.data;for(var r=0;r<t.VipList.length;r++)-1!==t.VipList[r].name.indexOf(App.UserInfo.rank)&&(t.VipId=t.VipList[r].id);t.PayAmount=t.VipList[t.VipIndex].price}),App.UserInfo.vip&&this.GetVipDeadLine(App.UserInfo.packageDays)},t.prototype.ChooseVIP=function(t){this.VipList[t].name!=App.UserInfo.rank&&(this.VipIndex=t,this.PayAmount=this.VipList[t].price)},t.prototype.Submit=function(){this.Service.BuyVip(this.VipList[this.VipIndex].id).subscribe(function(t){})},t.prototype.GetVipDeadLine=function(t){var e=(new Date).getTime(),r=new Date(e+864e5*t),n=r.getFullYear(),o=r.getMonth()+1,i=r.getDate();this.Deadline=n+"-"+o+"-"+i},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},296:function(t,e,r){"use strict";r.d(e,"a",function(){return n});r(0);var n=function(){function t(t){this.auth=t,this.App=window.App,this.HeadTitle="设 置"}return t.prototype.ChangeNickName=function(){App.ShowAlert({title:"密码",inputs:[{name:"PassWord"}],buttons:[{text:"取消"},{text:"保存",handler:function(t){}}]}).then(function(t){return t.onDidDismiss(function(){})})},t.prototype.Logout=function(){this.auth.Logout()},t.prototype.ionViewCanEnter=function(){this.auth.CheckToken()},t}()},298:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};r.d(n,"TabsPage",function(){return O.a}),r.d(n,"HomePage",function(){return U.a}),r.d(n,"CreditCardPage",function(){return V.a}),r.d(n,"CardInforPage",function(){return L.a}),r.d(n,"FinalpayPage",function(){return H.a}),r.d(n,"ConfirminfoPage",function(){return E.a}),r.d(n,"AddCreditCardPage",function(){return F.a}),r.d(n,"ChangecardsPage",function(){return G.a}),r.d(n,"AddDepositPage",function(){return x.a}),r.d(n,"ListofbankPage",function(){return M.a}),r.d(n,"BranchcardPage",function(){return j.a}),r.d(n,"StartPage",function(){return R.a}),r.d(n,"ModifyPasswordPage",function(){return q.a}),r.d(n,"FindPasswordPage",function(){return W.a}),r.d(n,"ResetPasswordPage",function(){return K.a}),r.d(n,"CheckoutPage",function(){return z.a}),r.d(n,"UcenterPage",function(){return X.a}),r.d(n,"LoginPage",function(){return J.a}),r.d(n,"LoanPage",function(){return Y.a}),r.d(n,"SetPasswordPage",function(){return $.a}),r.d(n,"AuthPage",function(){return Z.a}),r.d(n,"OrdersPage",function(){return Q.a}),r.d(n,"RecordsPage",function(){return tt.a}),r.d(n,"UinfoPage",function(){return et.a}),r.d(n,"UsetupPage",function(){return rt.a}),r.d(n,"VIPmembersPage",function(){return nt.a}),r.d(n,"MyCardPage",function(){return ot.a}),r.d(n,"RegisterPage",function(){return it.a});var o=r(33),i=r(1),a=r(0),s=(r(18),r(239)),u=r(39),c=r(249),d=r(152),h=r(157),p=r(91),l=r(136),f=r(158),g=r(24),y=function(){function t(){}return t.show=function(){g.a.Assigned(navigator.splashscreen)?navigator.splashscreen.show():console.error("SplashScreen Plugin not Installed.")},t.hide=function(){g.a.Assigned(navigator.splashscreen)?navigator.splashscreen.hide():console.error("SplashScreen Plugin not Installed.")},t}(),m=function(){function t(){}return t.overlaysWebView=function(t){void 0===t&&(t=!0),g.a.Assigned(window.StatusBar)?window.StatusBar.overlaysWebView(t):console.error("StatusBar Plugin not Installed.")},t.styleDefault=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.styleDefault():console.error("StatusBar Plugin not Installed.")},t.styleLightContent=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.styleLightContent():console.error("StatusBar Plugin not Installed.")},t.styleBlackTranslucent=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.styleBlackTranslucent():console.error("StatusBar Plugin not Installed.")},t.styleBlackOpaque=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.styleBlackOpaque():console.error("StatusBar Plugin not Installed.")},t.backgroundColorByName=function(t){g.a.Assigned(window.StatusBar)?window.StatusBar.backgroundColorByName(t):console.error("StatusBar Plugin not Installed.")},t.backgroundColorByHexString=function(t){g.a.Assigned(window.StatusBar)?window.StatusBar.backgroundColorByHexString(t):console.error("StatusBar Plugin not Installed.")},t.hide=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.hide():console.error("StatusBar Plugin not Installed.")},t.show=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.show():console.error("StatusBar Plugin not Installed.")},Object.defineProperty(t,"isVisible",{get:function(){return g.a.Assigned(window.StatusBar)?window.StatusBar.isVisible:(console.error("StatusBar Plugin not Installed."),!1)},enumerable:!0,configurable:!0}),t}(),b=r(5),w=r(12),C=r(99),v=r(82),P=r(97),S=r(89),A=r(80),k=r(98),I=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_=function(t){I(e,t);function e(e){var r=this.constructor;void 0===e&&(e="");var n=t.call(this,e)||this;return Object.setPrototypeOf(n,r.prototype),n}return e.Throw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw this.Create.apply(this,t)},e.Create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new((r=this).bind.apply(r,[void 0].concat(t)));var r},e.prototype.toString=function(){return this.name+": "+this.message},e}(Error),T=function(t){I(e,t);function e(e){void 0===e&&(e="");return""===e&&(e="e_abort"),t.call(this,e)||this}return e}(_),N=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},B=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},D=function(){function t(t){this.Injector=t,this.Instance=t.get(w.a),this.Platform=t.get(b.a),this.ToastCtrl=t.get(C.a),this.AlertCtrl=t.get(v.a),this.ModalCtrl=t.get(P.a),this.LoadingCtrl=t.get(S.a),this.ActionSheetCtrl=t.get(A.a),this.PopoverCtrl=t.get(k.a)}return Object.defineProperty(t.prototype,"IsAndroid",{get:function(){return this.Platform.is("android")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsIos",{get:function(){return this.Platform.is("ios")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsWindowPhone",{get:function(){return this.Platform.is("wp")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Nav",{get:function(){return this.Instance.getActiveNavs()[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ActiveView",{get:function(){return this.Nav.getActive(!0)},enumerable:!0,configurable:!0}),t.prototype.IconFont=function(t){return String.fromCharCode(t)},t.prototype.ShowError=function(t,e){return N(this,void 0,void 0,function(){var r,n,o;return B(this,function(a){switch(a.label){case 0:if(g.a.Assigned(e)||(e={}),Object(i.P)()&&(t instanceof Error?console.error(t.stack):(r=new Error,console.error(r.stack))),t instanceof T)return console.warn(t.message),[2];if(""===(n=g.a.IsString(t)?t:t instanceof Error?t.message:t instanceof _?t.message:""))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.ShowToast({message:n,position:e.position,duration:e.duration,cssClass:e.style})];case 2:return a.sent(),[3,4];case 3:return o=a.sent(),console.log(o),[3,4];case 4:return[2]}})})},t.prototype.ShowModal=function(t,e,r){return N(this,void 0,void 0,function(){var n;return B(this,function(o){switch(o.label){case 0:return[4,(n=this.ModalCtrl.create(t,e,r)).present()];case 1:return o.sent(),[2,n]}})})},t.prototype.ShowAlert=function(t){return N(this,void 0,void 0,function(){var e;return B(this,function(r){switch(r.label){case 0:return g.a.Assigned(t.enableBackdropDismiss)||(t.enableBackdropDismiss=!1),[4,(e=this.AlertCtrl.create(t)).present()];case 1:return r.sent(),[2,e]}})})},t.prototype.ShowToast=function(t){return N(this,void 0,void 0,function(){var e=this;return B(this,function(r){switch(r.label){case 0:return g.a.Assigned(this.Toast)?[4,this.Toast.dismiss()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.Toast=this.ToastCtrl.create(t),this.Toast.onDidDismiss(function(){return e.Toast=void 0}),[4,this.Toast.present()];case 3:return r.sent(),[2,this.Toast]}})})},t.prototype.ShowLoading=function(t,e){return N(this,void 0,void 0,function(){var r=this;return B(this,function(n){switch(n.label){case 0:return g.a.Assigned(this.Loading)?[2]:(g.a.Assigned(t.spinner)||(t.spinner="ios"),this.IsManualHideLoading=!1,this.Loading=this.LoadingCtrl.create(t),this.Loading.onDidDismiss(function(){g.a.Assigned(r.Loading)&&(r.Loading=void 0),!r.IsManualHideLoading&&g.a.Assigned(e)&&e()}),[4,this.Loading.present()]);case 1:return n.sent(),[2,this.Loading]}})})},t.prototype.HideLoading=function(){return N(this,void 0,void 0,function(){var t;return B(this,function(e){switch(e.label){case 0:if(!g.a.Assigned(this.Loading))return[3,5];this.IsManualHideLoading=!0,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.Loading.dismiss()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),console.log(t),[3,4];case 4:this.Loading=void 0,e.label=5;case 5:return[2]}})})},t.prototype.ShowActionSheet=function(t){return N(this,void 0,void 0,function(){var e;return B(this,function(r){switch(r.label){case 0:return g.a.Assigned(t)||(t={}),[4,(e=this.ActionSheetCtrl.create(t)).present()];case 1:return r.sent(),[2,e]}})})},t.prototype.ShowPopover=function(t,e,r,n){return N(this,void 0,void 0,function(){var o;return B(this,function(i){switch(i.label){case 0:return[4,(o=this.PopoverCtrl.create(t,r,n)).present({ev:e})];case 1:return i.sent(),[2,o]}})})},t}(),O=r(287),U=r(281),V=r(279),L=r(275),H=r(280),E=r(278),F=r(273),G=r(276),x=r(274),M=r(169),j=r(170),R=r(288),q=r(285),W=r(272),K=r(282),z=r(277),X=r(293),J=r(284),Y=r(283),$=r(289),Z=r(271),Q=r(290),tt=r(292),et=r(294),rt=r(296),nt=r(295),ot=r(291),it=r(286),at=r(13),st=function(t){Object(a.__extends)(e,t);function e(e,r){var o=t.call(this,e)||this;return o.auth=r,o.UserInfo={},o.Cards=new Array,o.IsVip=!1,o.CanTrade=!0,o.CurrentCreditCards={},o.CurrentDepositCard={},o.RootPage=n,o.HardwareBackButtonDisabled=!1,o.BackButtonPressed=!1,window.App=o,o.Platform.ready().then(function(){o.Platform.registerBackButtonAction(function(){o.HardwareBackButtonDisabled||(App.Nav.canGoBack()?App.Nav.pop():o.BackButtonPressed?o.Platform.exitApp():(o.ShowToast("再按一次退出5u卡贝"),o.BackButtonPressed=!0,setTimeout(function(){o.BackButtonPressed=!1},2e3)))}),o.IsAndroid&&(window.addEventListener("native.keyboardshow",o.keyboardShowHandler.bind(o)),window.addEventListener("native.keyboardhide",o.keyboardHideHandler.bind(o))),o.auth.currentUser.subscribe(function(t){o.UserInfo=t})}),o}return e.prototype.keyboardShowHandler=function(t){window.scrollY<100&&window.scrollTo(0,t.keyboardHeight)},e.prototype.keyboardHideHandler=function(t){0!=window.scrollY&&window.scrollTo(0,0)},e.prototype.DisableHardwareBackButton=function(){this.HardwareBackButtonDisabled=!0},e.prototype.EnableHardwareBackButton=function(){this.HardwareBackButtonDisabled=!1},e.prototype.ShowToast=function(e){return e instanceof Object?t.prototype.ShowToast.call(this,e):t.prototype.ShowToast.call(this,{message:e,position:"middle",cssClass:"toast-default",duration:1500})},e.prototype.ShowLoading=function(e){return e instanceof Object?t.prototype.ShowLoading.call(this,e):t.prototype.ShowLoading.call(this,{spinner:"ios-small",content:e,cssClass:"loading-default"})},e.prototype.ShowError=function(e,r,n){return void 0===r&&(r=3e3),void 0===n&&(n="middle"),t.prototype.ShowError.call(this,e,{duration:r,position:n,style:"toast-error",prefix_lang:"hint."})},Object.defineProperty(e.prototype,"UserFace",{get:function(){if(g.a.Assigned(localStorage.getItem("imageface"))){return{backgroundImage:"url("+localStorage.getItem("imageface")+")"}}return null},enumerable:!0,configurable:!0}),e.prototype.IsReal=function(t){return!1},Object.defineProperty(e.prototype,"IsIdAuthed",{get:function(){return App.UserInfo.idAuthed>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsBankcardAuthed",{get:function(){return App.UserInfo.bankcardAuthed>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsCompleteAuthed",{get:function(){return this.IsIdAuthed&&this.IsBankcardAuthed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IconFace",{get:function(){return null===this.UserFace&&"男"===this.UserInfo.sex},enumerable:!0,configurable:!0}),e}(D),ut=function(){return function(t,e){var r=this;this.auth=e,this.rootPage="TabsPage",t.Platform.ready().then(function(){y.show(),m.hide(),m.overlaysWebView(!0),t.IsIos?m.styleBlackTranslucent():m.backgroundColorByHexString("#2D93F3")}).then(function(){y.hide(),m.show()}).then(function(){r.auth.GetUserData()})}}(),ct=r(63),dt=r(26),ht=r(62),pt=r(138),lt=r(338),ft=r(339),gt=function(){function t(t,e,r,n){this.http=t,this.appVersion=e,this.fileTransfer=r,this.device=n,this.curVersion=0,this.App=window.App,this.file=new ft.a,this.fileOpener=new lt.a}return t.prototype.appUpdate=function(){var t=this;App.IsAndroid&&(this.setCurVersion(),this.setUpdateInfo().then(function(){if(t.hasNewVersion()){App.ShowAlert({title:"版本升级",message:"发现新版本，是否升级？",buttons:[{text:"取消",role:"cancel",handler:function(){console.log("已取消升级")}},{text:"确定",handler:function(){t.download()}}]})}}).catch(function(t){console.log(t)}))},t.prototype.setUpdateInfo=function(){var t=this;return new Promise(function(e,r){t.http.get("http://58mpay.com/pay/update.xml").toPromise().then(function(r){console.log(r.text()),t.xml=r.text(),t.setVersion(parseInt(t.getFromXml("version"))),t.setApkUrl(t.getFromXml("url")),e()}).catch(function(t){r(t),console.log(t)})})},t.prototype.setVersion=function(t){this.version=t},t.prototype.setApkUrl=function(t){this.apkUrl=t},t.prototype.getFromXml=function(t){var e=this.xml.match("<("+t+")>([^<>]+)</"+t+">");return e.length>2?e[2]:""},t.prototype.setCurVersion=function(){var t=this;this.appVersion.getVersionCode().then(function(e){t.curVersion=parseInt(e)}).catch(function(t){console.log(t)})},t.prototype.hasNewVersion=function(){return this.curVersion>0&&this.curVersion<this.version},t.prototype.download=function(){var t=this,e=this.fileTransfer.create();this.showProcess(),e.onProgress(function(e){var r=e.loaded/e.total*100;t.showProcess(),r>99&&App.HideLoading()}),this.file.createFile(this.getStoragePath,"58pay.apk",!0).then(function(r){e.download(t.apkUrl,r.toInternalURL(),!0).then(function(e){t.fileOpener.open(e.toInternalURL(),"application/vnd.android.package-archive").then(function(t){console.log("打开成功")}).catch(function(t){console.log("打开文件失败"),console.log(t)}),App.HideLoading(),console.log("download complete: "+e.toURL())}).catch(function(t){console.log(t)})}).catch(function(t){console.log("创建文件失败"),console.log(t)})},t.prototype.showProcess=function(){App.ShowLoading({content:"下载中..."})},Object.defineProperty(t.prototype,"getStoragePath",{get:function(){return App.IsAndroid&&this.device.version>"7"?this.file.dataDirectory:this.file.externalDataDirectory},enumerable:!0,configurable:!0}),t}(),yt=function(){return function(){}}(),mt=r(340),bt=r(341),wt=r(71),Ct=r(92),vt=function(){function t(){}return t.prototype.intercept=function(t,e){var r=t;if(!t.headers.has("Authorization")){var n=Ct.a.getToken();r=t.clone({headers:t.headers.set("Authorization","Bearer "+n)})}return e.handle(r).pipe(Object(bt.catchError)(this.handleError)).pipe(Object(bt.tap)(function(t){if(t instanceof u.h){if(t.body.code===wt.a.SESSION_TIMEOUT){var e=Ct.a.getMobile(),r=Ct.a.getSecret();return g.a.Assigned(e)&&g.a.Assigned(r)?location.href="/#/thirdLogin/"+e+"/"+r:location.href="/#/login",new mt.ErrorObservable("登录超时")}if(t.body.code===wt.a.REQ_FAIL)return g.a.Assigned(t.body.msg)&&App.ShowError(t.body.msg),new mt.ErrorObservable("请求失败")}}))},t.prototype.handleError=function(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.log("Backend returned code "+t.status+", body was: "+t.error),new mt.ErrorObservable("Something bad happened; please try again later.")},t}();Object(i.M)();var Pt=function(){return function(){}}(),St=r(66),At=r(261),kt=r(262),It=r(263),_t=r(264),Tt=r(265),Nt=r(266),Bt=r(267),Dt=r(268),Ot=r(269),Ut=r(432),Vt=r(46),Lt=r(70),Ht=r(6),Et=r(31),Ft=r(2),Gt=r(11),xt=r(40),Mt=r(20),jt=r(14),Rt=i.X({encapsulation:2,styles:[],data:{}});function qt(t){return i._19(0,[i._16(402653184,1,{nav:0}),(t()(),i.Z(1,0,null,null,2,"ion-nav",[],null,null,null,Ut.b,Ut.a)),i._15(6144,null,Vt.a,null,[Lt.a]),i.Y(3,4374528,[[1,4],["rootNavController",4]],0,Lt.a,[[2,Ht.a],[2,Et.a],w.a,Ft.a,b.a,i.j,i.u,i.z,i.i,Gt.l,xt.a,[2,Mt.a],jt.a,i.k],{root:[0,"root"]},null)],function(t,e){t(e,3,0,e.component.rootPage)},null)}var Wt=i.V("ng-component",ut,function(t){return i._19(0,[(t()(),i.Z(0,0,null,null,1,"ng-component",[],null,null,null,qt,Rt)),i.Y(1,49152,null,0,ut,[st,at.a],null,null)],null,null)},{},{},[]),Kt=r(21),zt=r(140),Xt=r(15),Jt=r(139),Yt=r(22),$t=r(45),Zt=r(53),Qt=r(160),te=r(68),ee=r(54),re=r(84),ne=r(142),oe=r(100),ie=r(103),ae=r(105),se=r(104),ue=r(156),ce=r(52),de=r(250),he=r(238),pe=r(141),le=r(42),fe=r(132),ge=r(143),ye=i.W(Pt,[St.b],function(t){return i._10([i._11(512,i.i,i.S,[[8,[At.a,kt.a,It.a,_t.a,Tt.a,Nt.a,Bt.a,Dt.a,Ot.a,Wt]],[3,i.i],i.s]),i._11(5120,i.r,i._9,[[3,i.r]]),i._11(4608,Kt.k,Kt.j,[i.r,[2,Kt.s]]),i._11(5120,i.b,i._0,[]),i._11(5120,i.p,i._6,[]),i._11(5120,i.q,i._7,[]),i._11(4608,o.c,o.q,[Kt.c]),i._11(6144,i.D,null,[o.c]),i._11(4608,o.f,zt.a,[]),i._11(5120,o.d,function(t,e,r,n,i){return[new o.k(t,e),new o.o(r),new o.n(n,i)]},[Kt.c,i.u,Kt.c,Kt.c,o.f]),i._11(4608,o.e,o.e,[o.d,i.u]),i._11(135680,o.m,o.m,[Kt.c]),i._11(4608,o.l,o.l,[o.e,o.m]),i._11(6144,i.B,null,[o.l]),i._11(6144,o.p,null,[o.m]),i._11(4608,i.G,i.G,[i.u]),i._11(4608,o.h,o.h,[Kt.c]),i._11(4608,o.i,o.i,[Kt.c]),i._11(4608,u.j,u.o,[Kt.c,i.w,u.m]),i._11(4608,u.p,u.p,[u.j,u.n]),i._11(5120,u.a,function(t){return[t,new vt]},[u.p]),i._11(4608,u.l,u.l,[]),i._11(6144,u.k,null,[u.l]),i._11(4608,u.i,u.i,[u.k]),i._11(6144,u.b,null,[u.i]),i._11(5120,u.f,u.q,[u.b,[2,u.a]]),i._11(4608,u.c,u.c,[u.f]),i._11(4608,at.a,at.a,[u.c]),i._11(4608,st,st,[i.o,at.a]),i._11(4608,ct.a,ct.a,[u.c]),i._11(4608,dt.a,dt.a,[u.c]),i._11(4608,l.a,l.a,[]),i._11(4608,p.a,p.a,[]),i._11(4608,ht.b,ht.b,[u.c,l.a,p.a]),i._11(4608,h.a,h.a,[]),i._11(4608,f.a,f.a,[]),i._11(4608,gt,gt,[pt.a,h.a,p.a,f.a]),i._11(4608,Xt.v,Xt.v,[]),i._11(4608,Xt.d,Xt.d,[]),i._11(4608,A.a,A.a,[w.a,Ft.a]),i._11(4608,v.a,v.a,[w.a,Ft.a]),i._11(4608,Jt.a,Jt.a,[]),i._11(4608,Yt.a,Yt.a,[]),i._11(4608,$t.a,$t.a,[b.a]),i._11(4608,Zt.a,Zt.a,[Ft.a,b.a,i.u,jt.a]),i._11(4608,S.a,S.a,[w.a,Ft.a]),i._11(5120,Kt.f,Qt.c,[Kt.q,[2,Kt.a],Ft.a]),i._11(4608,Kt.e,Kt.e,[Kt.f]),i._11(5120,te.b,te.d,[w.a,te.a]),i._11(5120,Mt.a,Mt.b,[w.a,te.b,Kt.e,ee.b,i.i]),i._11(4608,P.a,P.a,[w.a,Ft.a,Mt.a]),i._11(4608,re.a,re.a,[w.a,Ft.a]),i._11(4608,k.a,k.a,[w.a,Ft.a,Mt.a]),i._11(4608,ne.a,ne.a,[Ft.a,b.a,jt.a,w.a,Gt.l]),i._11(4608,C.a,C.a,[w.a,Ft.a]),i._11(4608,xt.a,xt.a,[b.a,Ft.a]),i._11(4608,oe.b,oe.a,[]),i._11(4608,ie.a,ie.b,[]),i._11(4608,ae.b,ae.a,[]),i._11(4608,se.b,se.a,[]),i._11(4608,ue.a,ue.a,[]),i._11(4608,ce.a,ce.a,[ue.a,oe.b,ie.a,ae.b,se.b,ce.b,ce.c]),i._11(5120,de.a,de.c,[de.b]),i._11(4608,m,m,[]),i._11(4608,y,y,[]),i._11(4608,d.a,d.a,[]),i._11(512,Kt.b,Kt.b,[]),i._11(512,i.k,he.a,[]),i._11(256,Ft.b,{backButtonText:"",pageTransitionDelay:0,swipeBackEnabled:!1,preloadModules:!0},[]),i._11(1024,pe.a,pe.b,[]),i._11(1024,b.a,b.b,[o.b,pe.a,i.u]),i._11(1024,Ft.a,Ft.c,[Ft.b,b.a]),i._11(512,jt.a,jt.a,[b.a]),i._11(512,le.a,le.a,[]),i._11(512,w.a,w.a,[Ft.a,b.a,[2,le.a]]),i._11(512,Gt.l,Gt.l,[w.a]),i._11(256,te.a,{links:[{loadChildren:"../pages/auth/auth.module.ngfactory#AuthPageModuleNgFactory",name:"AuthPage",segment:"auth",priority:"low",defaultHistory:[]},{loadChildren:"../pages/findpassword/findpassword.module.ngfactory#FindPasswordPageModuleNgFactory",name:"FindPasswordPage",segment:"findpassword",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/addcreditcard/addcreditcard.module.ngfactory#AddCreditCardPageModuleNgFactory",name:"AddCreditCardPage",segment:"addcreditcard",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/adddeposit/adddeposit.module.ngfactory#AddDepositPageModuleNgFactory",name:"AddDepositPage",segment:"adddeposit",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/cardinfor/cardinfor.module.ngfactory#CardInforPageModuleNgFactory",name:"CardInforPage",segment:"cardinfor",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/branchcard/branchcard.module.ngfactory#BranchcardPageModuleNgFactory",name:"BranchcardPage",segment:"branchcard",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/changecards/changecards.module.ngfactory#ChangecardsPageModuleNgFactory",name:"ChangecardsPage",segment:"changecards",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/checkout/checkout.module.ngfactory#CheckoutPageModuleNgFactory",name:"CheckoutPage",segment:"checkout",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/confirminfo/confirminfo.module.ngfactory#ConfirminfoPageModuleNgFactory",name:"ConfirminfoPage",segment:"confirminfo",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/creditcard/creditcard.module.ngfactory#CreditCardPageModuleNgFactory",name:"CreditCardPage",segment:"creditcard",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/finalpay/finalpay.module.ngfactory#FinalpayPageModuleNgFactory",name:"FinalpayPage",segment:"finalpay",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/listofbank/listofbank.module.ngfactory#ListofbankPageModuleNgFactory",name:"ListofbankPage",segment:"listofbank",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/home.module.ngfactory#HomePageModuleNgFactory",name:"HomePage",segment:"home",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/resetpassword/resetpassword.module.ngfactory#ResetPasswordPageModuleNgFactory",name:"ResetPasswordPage",segment:"resetpassword",priority:"low",defaultHistory:[]},{loadChildren:"../pages/loan/loan.module.ngfactory#LoanPageModuleNgFactory",name:"LoanPage",segment:"loan",priority:"low",defaultHistory:[]},{loadChildren:"../pages/login/login.module.ngfactory#LoginPageModuleNgFactory",name:"LoginPage",segment:"login",priority:"low",defaultHistory:[]},{loadChildren:"../pages/modifypassword/modifypassword.module.ngfactory#ModifyPasswordPageModuleNgFactory",name:"ModifyPasswordPage",segment:"modifypassword",priority:"low",defaultHistory:[]},{loadChildren:"../pages/register/register.module.ngfactory#RegisterPageModuleNgFactory",name:"RegisterPage",segment:"register",priority:"low",defaultHistory:[]},{loadChildren:"../pages/tabs/tabs.module.ngfactory#TabsPageModuleNgFactory",name:"TabsPage",segment:"tabs",priority:"low",defaultHistory:[]},{loadChildren:"../pages/start/start.module.ngfactory#StartPageModuleNgFactory",name:"StartPage",segment:"start",priority:"low",defaultHistory:[]},{loadChildren:"../pages/setpassword/setpassword.module.ngfactory#SetPasswordPageModuleNgFactory",name:"SetPasswordPage",segment:"setpassword",priority:"low",defaultHistory:[]},{loadChildren:"../pages/thirdparty/thirdparty.module.ngfactory#ThirdPartyPageModuleNgFactory",name:"ThirdPartyPage",segment:"thirdLogin/:mobile/:key",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/orders/orders.module.ngfactory#OrdersPageModuleNgFactory",name:"OrdersPage",segment:"orders",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/mycard/mycard.module.ngfactory#MyCardPageModuleNgFactory",name:"MyCardPage",segment:"mycard",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/records/records.module.ngfactory#RecordsPageModuleNgFactory",name:"RecordsPage",segment:"records",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/ucenter.module.ngfactory#UcenterPageModuleNgFactory",name:"UcenterPage",segment:"ucenter",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/uinfo/uinfo.module.ngfactory#UinfoPageModuleNgFactory",name:"UinfoPage",segment:"uinfo",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/VIPmembers/VIPmembers.module.ngfactory#VIPmembersPageModuleNgFactory",name:"VIPmembersPage",segment:"VIPmembers",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/usetup/usetup.module.ngfactory#UsetupPageModuleNgFactory",name:"UsetupPage",segment:"usetup",priority:"low",defaultHistory:[]}]},[]),i._11(512,i.h,i.h,[]),i._11(512,fe.a,fe.a,[i.h]),i._11(1024,ee.b,ee.c,[fe.a,i.o]),i._11(1024,i.c,function(t,e,r,n,i,a,s,u,c,d,h,p,l){return[o.s(t),ge.a(e),Jt.b(r,n),ne.b(i,a,s,u,c),ee.d(d,h,p,l)]},[[2,i.t],Ft.a,b.a,jt.a,Ft.a,b.a,jt.a,w.a,Gt.l,Ft.a,te.a,ee.b,i.u]),i._11(512,i.d,i.d,[[2,i.c]]),i._11(131584,i.f,i.f,[i.u,i.T,i.o,i.k,i.i,i.d]),i._11(512,i.e,i.e,[i.f]),i._11(512,o.a,o.a,[[3,o.a]]),i._11(512,u.e,u.e,[]),i._11(512,u.d,u.d,[]),i._11(512,yt,yt,[]),i._11(512,Xt.t,Xt.t,[]),i._11(512,Xt.i,Xt.i,[]),i._11(512,Xt.q,Xt.q,[]),i._11(512,Qt.a,Qt.a,[]),i._11(512,s.a,s.a,[]),i._11(512,c.a,c.a,[]),i._11(512,Pt,Pt,[]),i._11(256,u.m,"XSRF-TOKEN",[]),i._11(256,u.n,"X-XSRF-TOKEN",[]),i._11(256,St.a,ut,[]),i._11(256,Kt.a,"/",[]),i._11(256,ce.c,void 0,[]),i._11(256,ce.b,void 0,[]),i._11(256,de.b,null,[])])});Object(i.M)(),Object(o.j)().bootstrapModuleFactory(ye)},62:function(t,e,r){"use strict";r.d(e,"a",function(){return d}),r.d(e,"b",function(){return h});var n=r(0),o=(r(136),r(91),r(315)),i=r.n(o),a=r(71),s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=r(137),d="bankcard_front",h=function(t){Object(n.__extends)(e,t);function e(e,r,n){var o=t.call(this,e)||this;return o.http=e,o.camera=r,o.fileTransfer=n,o.targetWidth=800,o.targetHeight=600,o}return e.prototype.OcrUpload=function(t,e,r){return s(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return[4,this.PostFile("kpay/api/ocr/upload",t,e,{type:r})];case 1:return[2,n.sent()]}})})},e.prototype.IdentityAuth=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(r){switch(r.label){case 0:return[4,this.PostFile("kpay/api/ocr/idcard","file",t,{type:e})];case 1:return[2,r.sent()]}})})},e.prototype.PostFiles=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(r){switch(r.label){case 0:return[4,this.PostByXMLHttpReq(t).then(function(t){return t})];case 1:return 1===(e=r.sent()).code?[2,e.data]:(App.ShowError(e.msg),[2,!1])}})})},e.prototype.PostFile=function(t,e,r,n){return s(this,void 0,void 0,function(){var o,i;return u(this,function(a){switch(a.label){case 0:for(o in n)this.SetParam(o,n[o]);return this.SetParam(e,r),window.cordova?[4,this.PostByFileTransfer(t,e,r,n).then(function(t){return t}).catch(function(t){App.ShowToast(t)})]:[3,2];case 1:return i=a.sent(),[3,4];case 2:return[4,this.PostByXMLHttpReq(t,e,r,n).then(function(t){return t}).catch(function(t){App.ShowToast(t)})];case 3:i=a.sent(),a.label=4;case 4:return 1===i.code?[2,i.data]:(App.ShowError(i.msg),[2,!1])}})})},e.prototype.showAddImage=function(){var t=this;return new Promise(function(e,r){if(window.cordova)new Promise(function(e,r){App.ShowActionSheet({title:"添加图片",buttons:[{text:"相册",handler:function(){e(t.camera.PictureSourceType.PHOTOLIBRARY)}},{text:"相机",handler:function(){e(t.camera.PictureSourceType.CAMERA)}},{text:"取消",role:"cancel",handler:function(){r()}}]})}).then(function(r){if(window.cordova){t.camera.getPicture({quality:50,sourceType:r,saveToPhotoAlbum:!1,correctOrientation:!0,targetWidth:t.targetWidth,targetHeight:t.targetHeight}).then(function(t){if(t.indexOf("?")>-1){var r=t.match(new RegExp(/[^?]+/,"ig"));r.length>0&&(t=r[0])}e({file:t,base64:t,blob:t})})}}).catch(function(t){console.log("Camera failed."),App.ShowToast("获取图片失败"),r(t)});else{var n=document.createElement("input");n.type="file",n.accept="image/png,image/jpeg,image/jpg,image/x-png",n.click(),n.onchange=function(){console.log(n.files[0]),App.ShowLoading("处理中"),i()(n.files[0],{quality:.6,width:t.targetWidth,height:t.targetHeight}).then(function(r){var o=t.dataURLtoFile(r.base64,n.files[0].name),i={file:o,base64:r.base64,blob:window.URL.createObjectURL(o)};e(i)}).catch(function(t){console.log("LRZ: Compress image failed."),console.log(t)}).always(function(){App.HideLoading()})}}})},e.prototype.dataURLtoBlob=function(t){for(var e=t.split(","),r=e[0].match(/:(.*?);/)[1],n=atob(e[1]),o=n.length,i=new Uint8Array(o);o--;)i[o]=n.charCodeAt(o);return new Blob([i],{type:r})},e.prototype.dataURLtoFile=function(t,e){for(var r=t.split(","),n=r[0].match(/:(.*?);/)[1],o=atob(r[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new File([a],e,{type:n})},e.prototype.PostByFileTransfer=function(t,e,r,n){var o=this;return new Promise(function(i,a){var s=o.BaseUrl+"/"+t;if(window.cordova){var u={fileKey:e,fileName:r,headers:{Authorization:o.getToken}};n&&(u.params=n);o.fileTransfer.create().upload(r,s,u).then(function(t){i(JSON.parse(t.response))}).catch(function(t){App.ShowToast("上传失败"),a(t)})}})},e.prototype.PostByXMLHttpReq=function(t,e,r,n){return s(this,void 0,void 0,function(){var o=this;return u(this,function(i){return[2,new Promise(function(i,a){var s=new FormData;c.keys(n).length>0&&c.forEach(n,function(t,e){s.append(e,t)});var u=encodeURI(o.BaseUrl+"/"+t);App.ShowLoading();var d=new XMLHttpRequest;d.open("GET",window.URL.createObjectURL(r),!0),d.responseType="blob",d.onload=function(t){if(200!=d.status)App.ShowError("您的浏览器不支持Blob"),console.error(t,d),a(t);else{var n=d.response,c=new XMLHttpRequest,h=r.type.split("/")[1],p=(new Date).getTime()+"."+h;s.append(e,n,p),c.onloadend=function(){App.HideLoading()},c.ontimeout=function(){App.HideLoading()},c.onreadystatechange=function(){4===c.readyState&&(200===c.status?i(JSON.parse(c.response)):a(c))},c.open("POST",u,!0),c.setRequestHeader("Authorization",o.getToken),c.send(s)}},d.send()})]})})},e}(a.a)},63:function(t,e,r){"use strict";r.d(e,"a",function(){return o});var n=r(0),o=function(t){Object(n.__extends)(e,t);function e(e){var r=t.call(this,e)||this;return r.http=e,r}return e.prototype.GetCashList=function(){return this.Post("kpay/api/cash/getCashList")},e.prototype.GetCashDetail=function(t){return this.SetParam("id",t),this.Post("kpay/api/cash/getCashDetail")},e.prototype.GetVoucherList=function(){return this.Post("kpay/api/cash/cashback/list")},e.prototype.GetMyCustomer=function(){return this.Post("kpay/api/user/mycustomer")},e.prototype.GetCashBack=function(){return this.Post("kpay/api/trade/list")},e.prototype.GetVipList=function(){return this.Post("kpay/api/package/list")},e.prototype.BuyVip=function(t){return this.SetParam("packId",t),this.Post("kpay/api/package/buy",{packId:t})},e}(r(71).a)},71:function(t,e,r){"use strict";r.d(e,"a",function(){return h});var n=r(39),o=r(138),i=r(317),a=(r.n(i),r(24)),s=r(92),u=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},d="http://39.104.113.132",h=function(){function t(t){this.http=t,this.headers=new n.g({"Content-Type":"application/x-www-form-urlencoded"}),this.params=new o.b}return Object.defineProperty(t.prototype,"BaseUrl",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getToken",{get:function(){var t=s.a.getToken();return a.a.Assigned(t)?"Bearer "+t:""},enumerable:!0,configurable:!0}),t.prototype.SetHeader=function(t,e){this.headers.set(t,e)},t.prototype.Md5T=function(t){return i.Md5.hashStr(t.toString())},t.prototype.Get=function(t){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.http.get(d+"/"+t,{headers:this.headers})];case 1:return[2,e.sent()]}})})},t.prototype.Post=function(t,e){var r=d+"/"+t,n=this.params.toString();return this.setNewParams(),this.http.post(r,n,{headers:this.headers})},t.prototype.SetParam=function(t,e){this.params.has(t)?this.params.set(t,e):this.params.append(t,e)},t.prototype.setNewParams=function(){this.params=new o.b},t.REQ_OK=1,t.REQ_FAIL=0,t.SESSION_TIMEOUT=2,t}()},92:function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n=function(){function t(){}return t.setToken=function(e){localStorage.setItem(t.tokenKey,e)},t.setMobile=function(e){localStorage.setItem(t.mobileKey,e)},t.setSecret=function(e){localStorage.setItem(t.secretKey,e)},t.getToken=function(){return localStorage.getItem(t.tokenKey)},t.removeToken=function(){return localStorage.removeItem(t.tokenKey)},t.getMobile=function(){return localStorage.getItem(t.mobileKey)},t.getSecret=function(){return localStorage.getItem(t.secretKey)},t.tokenKey="token",t.mobileKey="mobile",t.secretKey="third_party_secret",t}()}},[298]);