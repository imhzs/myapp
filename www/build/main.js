webpackJsonp([29],{104:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r(1),o=r(15),a=(r.n(o),r(66)),i=r(67),s=r(107),u=function(e){Object(n.__extends)(t,e);function t(t){var r=e.call(this,t)||this;return r.http=t,r.subject=new o.Subject,r}return t.prototype.VerifyId=function(e,t,r){return this.SetParam("idcardNo",e),this.SetParam("name",t),r&&this.SetParam("mobile",r),this.Post("kpay/api/idcard/auth")},t.prototype.GetProfitToday=function(){return this.Post("kpay/api/user/myprofit/today")},t.prototype.GetCardList=function(){var e=this;return this.Post("kpay/api/bankcard/list").subscribe(function(t){e.updateCards(t.data)},function(e){console.log(e)})},Object.defineProperty(t.prototype,"currentCards",{get:function(){return this.subject.asObservable()},enumerable:!0,configurable:!0}),t.prototype.updateCards=function(e){this.subject.next(s.concat(new Array,e))},t.prototype.SetPrimCard=function(e){return this.SetParam("cardId",e),this.Post("kpay/api/bankcard/setPrimary")},t.prototype.AddCreditCard=function(e,t){return this.SetParam("cardNo",e),this.SetParam("mobile",t),this.Post("kpay/api/bankcard/addCredit")},t.prototype.AddDeposiCard=function(e,t,r,n,o){return this.SetParam("cardNo",e),this.SetParam("bankName",t),this.SetParam("bankNo",r),this.SetParam("branchName",n),this.SetParam("mobile",o),this.Post("kpay/api/bankcard/addDeposit")},t.prototype.DelCard=function(e){return this.SetParam("cardId",e),this.Post("kpay/api/bankcard/del")},t.prototype.GetTolBanks=function(){return this.Post("kpay/api/bank/info")},t.prototype.GetBranchBanks=function(e){return this.SetParam("name",e),this.Post("kpay/api/bank/list")},t.prototype.GetAvaCash=function(e){return this.SetParam("amount",e),this.Post("kpay/api/cash/cashback/available")},t.prototype.GetBankPage=function(e,t,r,n){return this.SetParam("cardId",e),this.SetParam("enterCardId",t),this.SetParam("amount",Math.round(100*r)),this.SetParam("token",i.a.getToken()),n&&this.SetParam("cashbackId",n),this.SetResponseType("text"),this.Post("kpay/api/trade/quickPay/request")},t.prototype.GetVerifyode=function(e,t,r,n,o,a){return this.SetParam("acctNo",e),this.SetParam("cvn2",t),this.SetParam("amount",Math.round(100*o)),this.SetParam("mobile",n),this.SetParam("expDate",r),a&&this.SetParam("cashbackId",a),this.Post("kpay/api/trade/quickPay/sendVericode")},t.prototype.ConfirmResult=function(e,t){return this.SetParam("orderNo",e),this.SetParam("smsCode",t),this.Post("kpay/api/trade/quickPay/confirm")},t.prototype.SupportBanks=function(){return App.ShowLoading(),this.Post("kpay/api/trade/supportbanks")},t}(a.a)},163:function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r.d(t,"b",function(){return p});var n=r(1),o=(r(131),r(88),r(287)),a=r.n(o),i=r(66),s=r(30),u=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}u((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},d=r(107),l="bankcard_front",p=function(e){Object(n.__extends)(t,e);function t(t,r,n){var o=e.call(this,t)||this;return o.http=t,o.camera=r,o.fileTransfer=n,o.targetWidth=800,o.targetHeight=600,o}return t.prototype.OcrUpload=function(e,t,r){return u(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,this.PostFile("kpay/api/ocr/upload",e,t,{type:r})];case 1:return[2,n.sent()]}})})},t.prototype.IdentityAuth=function(e,t){return u(this,void 0,void 0,function(){return c(this,function(r){switch(r.label){case 0:return[4,this.PostFile("kpay/api/ocr/idcard","file",e,{type:t})];case 1:return[2,r.sent()]}})})},t.prototype.ImageUpload=function(e){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.PostFile("kpay/api/image/upload","image1",e,{})];case 1:return[2,t.sent()]}})})},t.prototype.PostFiles=function(e){return u(this,void 0,void 0,function(){var t;return c(this,function(r){switch(r.label){case 0:return[4,this.PostByXMLHttpReq(e).then(function(e){return e})];case 1:return 1===(t=r.sent()).code?[2,t.data]:(App.ShowError(t.msg),[2,!1])}})})},t.prototype.PostFile=function(e,t,r,n){return u(this,void 0,void 0,function(){var o,a;return c(this,function(i){switch(i.label){case 0:for(o in n)this.SetParam(o,n[o]);return this.SetParam(t,r),window.cordova?[4,this.PostByFileTransfer(e,t,r,n).then(function(e){return e}).catch(function(e){App.ShowToast(e)})]:[3,2];case 1:return a=i.sent(),[3,4];case 2:return[4,this.PostByXMLHttpReq(e,t,r,n).then(function(e){return e}).catch(function(e){App.ShowToast(e)})];case 3:a=i.sent(),i.label=4;case 4:return s.a.Assigned(a)&&1===a.code?[2,a.data]:(s.a.Assigned(a)&&a.msg&&App.ShowError(a.msg),[2,!1])}})})},t.prototype.showAddImage=function(){var e=this;return new Promise(function(t,r){if(window.cordova)new Promise(function(t,r){App.ShowActionSheet({title:"添加图片",buttons:[{text:"相册",handler:function(){t(e.camera.PictureSourceType.PHOTOLIBRARY)}},{text:"相机",handler:function(){t(e.camera.PictureSourceType.CAMERA)}},{text:"取消",role:"cancel",handler:function(){r()}}]})}).then(function(r){if(window.cordova){e.camera.getPicture({quality:50,sourceType:r,saveToPhotoAlbum:!1,correctOrientation:!0,targetWidth:e.targetWidth,targetHeight:e.targetHeight}).then(function(e){if(e.indexOf("?")>-1){var r=e.match(new RegExp(/[^?]+/,"ig"));r.length>0&&(e=r[0])}t({file:e,base64:e,blob:e})})}}).catch(function(e){console.log("Camera failed."),App.ShowToast("获取图片失败"),r(e)});else{var n=document.createElement("input");n.type="file",n.accept="image/png,image/jpeg,image/jpg,image/x-png",n.click(),n.onchange=function(){App.ShowLoading("处理中"),a()(n.files[0],{quality:.6,width:e.targetWidth,height:e.targetHeight}).then(function(r){var o=e.dataURLtoFile(r.base64,n.files[0].name),a={file:o,base64:r.base64,blob:window.URL.createObjectURL(o)};t(a)}).catch(function(e){console.log("LRZ: Compress image failed."),console.log(e)}).always(function(){App.HideLoading()})}}})},t.prototype.dataURLtoBlob=function(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),o=n.length,a=new Uint8Array(o);o--;)a[o]=n.charCodeAt(o);return new Blob([a],{type:r})},t.prototype.dataURLtoFile=function(e,t){for(var r=e.split(","),n=r[0].match(/:(.*?);/)[1],o=atob(r[1]),a=o.length,i=new Uint8Array(a);a--;)i[a]=o.charCodeAt(a);return new File([i],t,{type:n})},t.prototype.PostByFileTransfer=function(e,t,r,n){var o=this;return new Promise(function(a,i){var s=o.BaseUrl+"/"+e;if(window.cordova){var u={fileKey:t,fileName:r,headers:{Authorization:o.getToken}};n&&(u.params=n);o.fileTransfer.create().upload(r,s,u).then(function(e){a(JSON.parse(e.response))}).catch(function(e){App.ShowToast("上传失败"),i(e)})}})},t.prototype.PostByXMLHttpReq=function(e,t,r,n){return u(this,void 0,void 0,function(){var o=this;return c(this,function(a){return[2,new Promise(function(a,i){var s=new FormData;d.keys(n).length>0&&d.forEach(n,function(e,t){s.append(t,e)});var u=encodeURI(o.BaseUrl+"/"+e);App.ShowLoading();var c=new XMLHttpRequest;c.open("GET",window.URL.createObjectURL(r),!0),c.responseType="blob",c.onload=function(e){if(200!=c.status)App.ShowError("您的浏览器不支持Blob"),console.error(e,c),i(e);else{var n=c.response,d=new XMLHttpRequest;d.timeout=3e4;var l=r.type.split("/")[1],p=(new Date).getTime()+"."+l;s.append(t,n,p),d.onerror=function(e){App.HideLoading(),i(e)},d.onloadend=function(){App.HideLoading()},d.ontimeout=function(e){App.ShowError("请求超时，请稍后重试"),App.HideLoading(),i(e)},d.onreadystatechange=function(){App.HideLoading(),4===d.readyState&&(200===d.status?a(JSON.parse(d.response)):i(d))},d.open("POST",u,!0),d.setRequestHeader("Authorization",o.getToken),d.send(s)}},c.send()})]})})},t}(i.a)},164:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r(1),o=function(e){Object(n.__extends)(t,e);function t(t){var r=e.call(this,t)||this;return r.http=t,r}return t.prototype.GetCashList=function(){return this.Post("kpay/api/cash/getCashList")},t.prototype.GetCashDetail=function(e){return this.SetParam("id",e),this.Post("kpay/api/cash/getCashDetail")},t.prototype.GetVoucherList=function(){return this.Post("kpay/api/cash/cashback/list")},t.prototype.GetMyCustomer=function(){return this.Post("kpay/api/user/mycustomer")},t.prototype.GetCashBack=function(){return this.Post("kpay/api/trade/list")},t.prototype.GetVipList=function(){return this.Post("kpay/api/package/list")},t.prototype.BuyVip=function(e){return this.SetParam("packId",e),this.Post("kpay/api/package/buy")},t}(r(66).a)},185:function(e,t){function r(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=185},213:function(e,t,r){var n={"../pages/auth/auth.module.ngfactory":[401,18],"../pages/findpassword/findpassword.module.ngfactory":[402,17],"../pages/home/addcreditcard/addcreditcard.module.ngfactory":[403,4],"../pages/home/adddeposit/adddeposit.module.ngfactory":[404,0],"../pages/home/branchcard/branchcard.module.ngfactory":[405,9],"../pages/home/cardinfor/cardinfor.module.ngfactory":[407,16],"../pages/home/changecards/changecards.module.ngfactory":[406,5],"../pages/home/checkout/checkout.module.ngfactory":[408,19],"../pages/home/confirminfo/confirminfo.module.ngfactory":[409,24],"../pages/home/creditcard/creditcard.module.ngfactory":[410,3],"../pages/home/finalpay/finalpay.module.ngfactory":[411,1],"../pages/home/home.module.ngfactory":[412,28],"../pages/home/listofbank/listofbank.module.ngfactory":[413,8],"../pages/home/resetpassword/resetpassword.module.ngfactory":[415,15],"../pages/home/supportbank/supportbank.module.ngfactory":[414,23],"../pages/login/login.module.ngfactory":[418,14],"../pages/modifypassword/modifypassword.module.ngfactory":[416,13],"../pages/register/register.module.ngfactory":[417,12],"../pages/setpassword/setpassword.module.ngfactory":[419,11],"../pages/start/start.module.ngfactory":[420,25],"../pages/tabs/tabs.module.ngfactory":[421,26],"../pages/thirdparty/thirdparty.module.ngfactory":[424,27],"../pages/ucenter/VIPmembers/VIPmembers.module.ngfactory":[429,22],"../pages/ucenter/mycard/mycard.module.ngfactory":[422,7],"../pages/ucenter/profile/profile.module.ngfactory":[426,21],"../pages/ucenter/records/detail/recorddetail.module.ngfactory":[423,6],"../pages/ucenter/records/records.module.ngfactory":[425,2],"../pages/ucenter/ucenter.module.ngfactory":[427,10],"../pages/ucenter/usetup/usetup.module.ngfactory":[428,20]};function o(e){var t=n[e];return t?r.e(t[1]).then(function(){return r(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}o.keys=function(){return Object.keys(n)},o.id=213,e.exports=o},214:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){function e(){}return e.setShowLoading=function(e){this.loading=e},e.setLoadingText=function(e){this.loadingText=e},e.showLoading=function(){this.loading&&App.ShowLoading(this.loadingText)},e.hideLoading=function(){App.HideLoading(),this.loading=!0,this.loadingText="处理中"},e.loading=!0,e.loadingText="处理中",e}()},270:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};r.d(n,"tabsPage",function(){return O}),r.d(n,"homePage",function(){return M}),r.d(n,"creditCardPage",function(){return H}),r.d(n,"cardInforPage",function(){return E}),r.d(n,"finalPayPage",function(){return j}),r.d(n,"confirmInfoPage",function(){return U}),r.d(n,"addCreditCardPage",function(){return F}),r.d(n,"changeCardsPage",function(){return R}),r.d(n,"addDepositPage",function(){return x}),r.d(n,"listBankPage",function(){return D}),r.d(n,"branchcardPage",function(){return V}),r.d(n,"startPage",function(){return G}),r.d(n,"modifyPasswordPage",function(){return q}),r.d(n,"findPasswordPage",function(){return K}),r.d(n,"resetPasswordPage",function(){return X}),r.d(n,"checkoutPage",function(){return W}),r.d(n,"supportBankPage",function(){return z}),r.d(n,"ucenterPage",function(){return J}),r.d(n,"loginPage",function(){return Q}),r.d(n,"thirdLoginPage",function(){return Y}),r.d(n,"setPasswordPage",function(){return Z}),r.d(n,"authPage",function(){return $}),r.d(n,"recordsPage",function(){return ee}),r.d(n,"recordDetailPage",function(){return te}),r.d(n,"profilePage",function(){return re}),r.d(n,"usetupPage",function(){return ne}),r.d(n,"vipMembersPage",function(){return oe}),r.d(n,"myCardPage",function(){return ae}),r.d(n,"registerPage",function(){return ie});var o=r(32),a=r(0),i=r(1),s=(r(155),r(235)),u=r(36),c=r(245),d=r(247),l=r(152),p=r(88),f=r(131),h=r(153),g=r(30),y=function(){function e(){}return e.show=function(){g.a.Assigned(navigator.splashscreen)?navigator.splashscreen.show():console.error("SplashScreen Plugin not Installed.")},e.hide=function(){g.a.Assigned(navigator.splashscreen)?navigator.splashscreen.hide():console.error("SplashScreen Plugin not Installed.")},e}(),m=function(){function e(){}return e.overlaysWebView=function(e){void 0===e&&(e=!0),g.a.Assigned(window.StatusBar)?window.StatusBar.overlaysWebView(e):console.error("StatusBar Plugin not Installed.")},e.styleDefault=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.styleDefault():console.error("StatusBar Plugin not Installed.")},e.styleLightContent=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.styleLightContent():console.error("StatusBar Plugin not Installed.")},e.styleBlackTranslucent=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.styleBlackTranslucent():console.error("StatusBar Plugin not Installed.")},e.styleBlackOpaque=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.styleBlackOpaque():console.error("StatusBar Plugin not Installed.")},e.backgroundColorByName=function(e){g.a.Assigned(window.StatusBar)?window.StatusBar.backgroundColorByName(e):console.error("StatusBar Plugin not Installed.")},e.backgroundColorByHexString=function(e){g.a.Assigned(window.StatusBar)?window.StatusBar.backgroundColorByHexString(e):console.error("StatusBar Plugin not Installed.")},e.hide=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.hide():console.error("StatusBar Plugin not Installed.")},e.show=function(){g.a.Assigned(window.StatusBar)?window.StatusBar.show():console.error("StatusBar Plugin not Installed.")},Object.defineProperty(e,"isVisible",{get:function(){return g.a.Assigned(window.StatusBar)?window.StatusBar.isVisible:(console.error("StatusBar Plugin not Installed."),!1)},enumerable:!0,configurable:!0}),e}(),b=r(5),P=r(12),w=r(95),v=r(79),S=r(93),k=r(86),_=r(77),A=r(94),C=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),I=function(e){C(t,e);function t(t){var r=this.constructor;void 0===t&&(t="");var n=e.call(this,t)||this;return Object.setPrototypeOf(n,r.prototype),n}return t.Throw=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw this.Create.apply(this,e)},t.Create=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new((r=this).bind.apply(r,[void 0].concat(e)));var r},t.prototype.toString=function(){return this.name+": "+this.message},t}(Error),T=function(e){C(t,e);function t(t){void 0===t&&(t="");return""===t&&(t="e_abort"),e.call(this,t)||this}return t}(I),B=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}u((n=n.apply(e,t||[])).next())})},N=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},L=function(){function e(e){this.Injector=e,this.Instance=e.get(P.a),this.Platform=e.get(b.a),this.ToastCtrl=e.get(w.a),this.AlertCtrl=e.get(v.a),this.ModalCtrl=e.get(S.a),this.LoadingCtrl=e.get(k.a),this.ActionSheetCtrl=e.get(_.a),this.PopoverCtrl=e.get(A.a)}return Object.defineProperty(e.prototype,"IsAndroid",{get:function(){return this.Platform.is("android")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsIos",{get:function(){return this.Platform.is("ios")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsWindowPhone",{get:function(){return this.Platform.is("wp")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Nav",{get:function(){return this.Instance.getActiveNavs()[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ActiveView",{get:function(){return this.Nav.getActive(!0)},enumerable:!0,configurable:!0}),e.prototype.IconFont=function(e){return String.fromCharCode(e)},e.prototype.ShowError=function(e,t){return B(this,void 0,void 0,function(){var r,n,o;return N(this,function(i){switch(i.label){case 0:if(g.a.Assigned(t)||(t={}),Object(a.P)()&&(e instanceof Error?console.error(e.stack):(r=new Error,console.error(r.stack))),e instanceof T)return console.warn(e.message),[2];if(""===(n=g.a.IsString(e)?e:e instanceof Error?e.message:e instanceof I?e.message:""))return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.ShowToast({message:n,position:t.position,duration:t.duration,cssClass:t.style})];case 2:return i.sent(),[3,4];case 3:return o=i.sent(),console.log(o),[3,4];case 4:return[2]}})})},e.prototype.ShowModal=function(e,t,r){return B(this,void 0,void 0,function(){var n;return N(this,function(o){switch(o.label){case 0:return[4,(n=this.ModalCtrl.create(e,t,r)).present()];case 1:return o.sent(),[2,n]}})})},e.prototype.ShowAlert=function(e){return B(this,void 0,void 0,function(){var t;return N(this,function(r){switch(r.label){case 0:return g.a.Assigned(e.enableBackdropDismiss)||(e.enableBackdropDismiss=!1),[4,(t=this.AlertCtrl.create(e)).present()];case 1:return r.sent(),[2,t]}})})},e.prototype.ShowToast=function(e){return B(this,void 0,void 0,function(){var t=this;return N(this,function(r){switch(r.label){case 0:return g.a.Assigned(this.Toast)?[4,this.Toast.dismiss()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.Toast=this.ToastCtrl.create(e),this.Toast.onDidDismiss(function(){return t.Toast=void 0}),[4,this.Toast.present()];case 3:return r.sent(),[2,this.Toast]}})})},e.prototype.ShowLoading=function(e,t){return B(this,void 0,void 0,function(){var r=this;return N(this,function(n){switch(n.label){case 0:return g.a.Assigned(this.Loading)?[2]:(g.a.Assigned(e.spinner)||(e.spinner="ios"),this.IsManualHideLoading=!1,this.Loading=this.LoadingCtrl.create(e),this.Loading.onDidDismiss(function(){g.a.Assigned(r.Loading)&&(r.Loading=void 0),!r.IsManualHideLoading&&g.a.Assigned(t)&&t()}),[4,this.Loading.present()]);case 1:return n.sent(),[2,this.Loading]}})})},e.prototype.HideLoading=function(){return B(this,void 0,void 0,function(){var e;return N(this,function(t){switch(t.label){case 0:if(!g.a.Assigned(this.Loading))return[3,5];this.IsManualHideLoading=!0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Loading.dismiss()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),console.log(e),[3,4];case 4:this.Loading=void 0,t.label=5;case 5:return[2]}})})},e.prototype.ShowActionSheet=function(e){return B(this,void 0,void 0,function(){var t;return N(this,function(r){switch(r.label){case 0:return g.a.Assigned(e)||(e={}),[4,(t=this.ActionSheetCtrl.create(e)).present()];case 1:return r.sent(),[2,t]}})})},e.prototype.ShowPopover=function(e,t,r,n){return B(this,void 0,void 0,function(){var o;return N(this,function(a){switch(a.label){case 0:return[4,(o=this.PopoverCtrl.create(e,r,n)).present({ev:t})];case 1:return a.sent(),[2,o]}})})},e}(),O="TabsPage",M="HomePage",H="CreditCardPage",E="CardInforPage",j="FinalpayPage",U="ConfirminfoPage",F="AddCreditCardPage",R="ChangecardsPage",x="AddDepositPage",D="ListofbankPage",V="BranchcardPage",G="StartPage",q="ModifyPasswordPage",K="FindPasswordPage",X="ResetPasswordPage",W="CheckoutPage",z="SupportBankPage",J="UcenterPage",Q="LoginPage",Y="ThirdPartyPage",Z="SetPasswordPage",$="AuthPage",ee="RecordsPage",te="OrderDetailPage",re="ProfilePage",ne="UsetupPage",oe="VIPmembersPage",ae="MyCardPage",ie="RegisterPage",se=r(56),ue=r(67),ce=function(e){Object(i.__extends)(t,e);function t(t,r){var o=e.call(this,t)||this;return o.auth=r,o.UserInfo={},o.Cards=new Array,o.IsVip=!1,o.CanTrade=!0,o.pages=n,o.AppName="5U卡贝",o.HardwareBackButtonDisabled=!1,o.BackButtonPressed=!1,window.App=o,o.Platform.ready().then(function(){o.Platform.registerBackButtonAction(function(){o.HardwareBackButtonDisabled||(App.Nav.canGoBack()?App.Nav.pop():o.BackButtonPressed?o.Platform.exitApp():(o.ShowToast("再按一次退出5u卡贝"),o.BackButtonPressed=!0,setTimeout(function(){o.BackButtonPressed=!1},2e3)))}),o.IsAndroid&&(window.addEventListener("native.keyboardshow",o.keyboardShowHandler.bind(o)),window.addEventListener("native.keyboardhide",o.keyboardHideHandler.bind(o))),o.auth.currentUser.subscribe(function(e){o.UserInfo=e})}),o}return t.prototype.keyboardShowHandler=function(e){window.scrollY<100&&window.scrollTo(0,e.keyboardHeight)},t.prototype.keyboardHideHandler=function(e){0!=window.scrollY&&window.scrollTo(0,0)},t.prototype.DisableHardwareBackButton=function(){this.HardwareBackButtonDisabled=!0},t.prototype.EnableHardwareBackButton=function(){this.HardwareBackButtonDisabled=!1},t.prototype.ShowToast=function(t){return t instanceof Object?e.prototype.ShowToast.call(this,t):e.prototype.ShowToast.call(this,{message:t,position:"middle",cssClass:"toast-default",duration:1500})},t.prototype.ShowLoading=function(t){return t instanceof Object?e.prototype.ShowLoading.call(this,t):e.prototype.ShowLoading.call(this,{spinner:"ios-small",content:t,cssClass:"loading-default"})},t.prototype.ShowError=function(t,r,n){return void 0===r&&(r=3e3),void 0===n&&(n="middle"),e.prototype.ShowError.call(this,t,{duration:r,position:n,style:"toast-error",prefix_lang:"hint."})},t.prototype.IsReal=function(e){if(this.IsIdAuthed){if(!e)return;App.Nav.push(e)}else App.Nav.push(App.pages.authPage)},Object.defineProperty(t.prototype,"IsIdAuthed",{get:function(){return App.UserInfo.idAuthed>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsBankcardAuthed",{get:function(){return App.UserInfo.bankcardAuthed>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsCompleteAuthed",{get:function(){return this.IsIdAuthed&&this.IsBankcardAuthed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticated",{get:function(){return g.a.Assigned(ue.a.getToken())},enumerable:!0,configurable:!0}),t}(L),de=function(){return function(e,t){var r=this;this.App=e,this.auth=t,this.rootPage="TabsPage",e.Platform.ready().then(function(){m.hide(),y.show(),m.overlaysWebView(!0),e.IsIos?m.styleBlackTranslucent():m.backgroundColorByHexString("#569af3")}).then(function(){y.hide(),m.show()}).then(function(){r.auth.shouldPassThrough||r.auth.GetUserData()})}}(),le=r(164),pe=r(104),fe=r(163),he=r(132),ge=r(307),ye=r(308),me=function(){function e(e,t,r,n){this.http=e,this.appVersion=t,this.fileTransfer=r,this.device=n,this.curVersion=0,this.App=window.App,this.file=new ye.a,this.fileOpener=new ge.a}return e.prototype.appUpdate=function(){var e=this;App.IsAndroid&&(this.setCurVersion(),this.setUpdateInfo().then(function(){if(e.hasNewVersion()){App.ShowAlert({title:"版本升级",message:"发现新版本，是否升级？",buttons:[{text:"取消",role:"cancel",handler:function(){console.log("已取消升级")}},{text:"确定",handler:function(){e.download()}}]})}}).catch(function(e){console.log(e)}))},e.prototype.setUpdateInfo=function(){var e=this;return new Promise(function(t,r){e.http.get("http://58mpay.com/pay/update.xml").toPromise().then(function(r){console.log(r.text()),e.xml=r.text(),e.setVersion(parseInt(e.getFromXml("version"))),e.setApkUrl(e.getFromXml("url")),t()}).catch(function(e){r(e),console.log(e)})})},e.prototype.setVersion=function(e){this.version=e},e.prototype.setApkUrl=function(e){this.apkUrl=e},e.prototype.getFromXml=function(e){var t=this.xml.match("<("+e+")>([^<>]+)</"+e+">");return t.length>2?t[2]:""},e.prototype.setCurVersion=function(){var e=this;this.appVersion.getVersionCode().then(function(t){e.curVersion=parseInt(t)}).catch(function(e){console.log(e)})},e.prototype.hasNewVersion=function(){return this.curVersion>0&&this.curVersion<this.version},e.prototype.download=function(){var e=this,t=this.fileTransfer.create();this.showProcess(),t.onProgress(function(t){var r=t.loaded/t.total*100;e.showProcess(),r>99&&App.HideLoading()}),this.file.createFile(this.getStoragePath,"58pay.apk",!0).then(function(r){t.download(e.apkUrl,r.toInternalURL(),!0).then(function(t){e.fileOpener.open(t.toInternalURL(),"application/vnd.android.package-archive").then(function(e){console.log("打开成功")}).catch(function(e){console.log("打开文件失败"),console.log(e)}),App.HideLoading(),console.log("download complete: "+t.toURL())}).catch(function(e){console.log(e)})}).catch(function(e){console.log("创建文件失败"),console.log(e)})},e.prototype.showProcess=function(){App.ShowLoading({content:"下载中..."})},Object.defineProperty(e.prototype,"getStoragePath",{get:function(){return App.IsAndroid&&this.device.version>"7"?this.file.dataDirectory:this.file.externalDataDirectory},enumerable:!0,configurable:!0}),e}(),be=function(){return function(){}}(),Pe=r(309),we=r(310),ve=r(257),Se=r(66),ke=r(214),_e=function(){function e(){}return e.prototype.intercept=function(e,t){ke.a.showLoading();var r=e;if(!e.headers.has("Authorization")){var n=ue.a.getToken();r=e.clone({headers:e.headers.set("Authorization","Bearer "+n)})}return t.handle(r).pipe(Object(we.timeout)(15e3)).pipe(Object(we.catchError)(this.handleError)).pipe(Object(we.tap)(function(e){if(e instanceof u.h){if(ke.a.hideLoading(),e.body.code==Se.a.SESSION_TIMEOUT){var t=ue.a.getMobile(),r=ue.a.getSecret();return ue.a.removeToken(),g.a.Assigned(t)&&g.a.Assigned(r)?App.Nav.setPages([{page:App.pages.tabsPage},{page:App.pages.thirdLoginPage,params:{mobile:t,key:r}}]):App.Nav.setPages([{page:App.pages.tabsPage},{page:App.pages.loginPage}]),new Pe.ErrorObservable("登录超时")}if(e.body.code==Se.a.REQ_FAIL)return g.a.Assigned(e.body.msg)&&App.ShowError(e.body.msg),new Pe.ErrorObservable("请求成功，返回失败值")}})).pipe(Object(we.catchError)(this.handleError))},e.prototype.handleError=function(e){return e instanceof ve.TimeoutError?(App.ShowError("请求超时，请稍后重新"),console.log("Request timeout: "+e.message)):e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.log("Backend returned code "+e.status+", body was: "+e.error),ke.a.hideLoading(),new Pe.ErrorObservable("Something bad happened; please try again later.")},e}();Object(a.M)();var Ae=function(){return function(){}}(),Ce=r(60),Ie=r(259),Te=r(260),Be=r(261),Ne=r(262),Le=r(263),Oe=r(264),Me=r(265),He=r(266),Ee=r(267),je=r(400),Ue=r(43),Fe=r(64),Re=r(6),xe=r(28),De=r(2),Ve=r(11),Ge=r(37),qe=r(18),Ke=r(13),Xe=a.X({encapsulation:2,styles:[],data:{}});function We(e){return a._19(0,[a._16(402653184,1,{nav:0}),(e()(),a.Z(1,0,null,null,2,"ion-nav",[],null,null,null,je.b,je.a)),a._15(6144,null,Ue.a,null,[Fe.a]),a.Y(3,4374528,[[1,4],["rootNavController",4]],0,Fe.a,[[2,Re.a],[2,xe.a],P.a,De.a,b.a,a.j,a.u,a.z,a.i,Ve.l,Ge.a,[2,qe.a],Ke.a,a.k],{root:[0,"root"]},null)],function(e,t){e(t,3,0,t.component.rootPage)},null)}var ze=a.V("ng-component",de,function(e){return a._19(0,[(e()(),a.Z(0,0,null,null,1,"ng-component",[],null,null,null,We,Xe)),a.Y(1,49152,null,0,de,[ce,se.a],null,null)],null,null)},{},{},[]),Je=r(17),Qe=r(134),Ye=r(156),Ze=r(21),$e=r(133),et=r(19),tt=r(42),rt=r(50),nt=r(62),ot=r(51),at=r(81),it=r(136),st=r(96),ut=r(99),ct=r(101),dt=r(100),lt=r(151),pt=r(49),ft=r(246),ht=r(234),gt=r(135),yt=r(39),mt=r(127),bt=r(137),Pt=a.W(Ae,[Ce.b],function(e){return a._10([a._11(512,a.i,a.S,[[8,[Ie.a,Te.a,Be.a,Ne.a,Le.a,Oe.a,Me.a,He.a,Ee.a,ze]],[3,a.i],a.s]),a._11(5120,a.r,a._9,[[3,a.r]]),a._11(4608,Je.k,Je.j,[a.r,[2,Je.s]]),a._11(5120,a.b,a._0,[]),a._11(5120,a.p,a._6,[]),a._11(5120,a.q,a._7,[]),a._11(4608,o.c,o.q,[Je.c]),a._11(6144,a.D,null,[o.c]),a._11(4608,o.f,Qe.a,[]),a._11(5120,o.d,function(e,t,r,n,a){return[new o.k(e,t),new o.o(r),new o.n(n,a)]},[Je.c,a.u,Je.c,Je.c,o.f]),a._11(4608,o.e,o.e,[o.d,a.u]),a._11(135680,o.m,o.m,[Je.c]),a._11(4608,o.l,o.l,[o.e,o.m]),a._11(6144,a.B,null,[o.l]),a._11(6144,o.p,null,[o.m]),a._11(4608,a.G,a.G,[a.u]),a._11(4608,o.h,o.h,[Je.c]),a._11(4608,o.i,o.i,[Je.c]),a._11(4608,u.j,u.o,[Je.c,a.w,u.m]),a._11(4608,u.p,u.p,[u.j,u.n]),a._11(5120,u.a,function(e){return[e,new _e]},[u.p]),a._11(4608,u.l,u.l,[]),a._11(6144,u.k,null,[u.l]),a._11(4608,u.i,u.i,[u.k]),a._11(6144,u.b,null,[u.i]),a._11(5120,u.f,u.q,[u.b,[2,u.a]]),a._11(4608,u.c,u.c,[u.f]),a._11(5120,Je.f,Ye.c,[Je.q,[2,Je.a],De.a]),a._11(4608,Je.e,Je.e,[Je.f]),a._11(4608,pe.a,pe.a,[u.c]),a._11(4608,se.a,se.a,[u.c,Je.e,pe.a,o.c]),a._11(4608,ce,ce,[a.o,se.a]),a._11(4608,le.a,le.a,[u.c]),a._11(4608,f.a,f.a,[]),a._11(4608,p.a,p.a,[]),a._11(4608,fe.b,fe.b,[u.c,f.a,p.a]),a._11(4608,l.a,l.a,[]),a._11(4608,h.a,h.a,[]),a._11(4608,me,me,[he.a,l.a,p.a,h.a]),a._11(4608,Ze.v,Ze.v,[]),a._11(4608,Ze.d,Ze.d,[]),a._11(4608,_.a,_.a,[P.a,De.a]),a._11(4608,v.a,v.a,[P.a,De.a]),a._11(4608,$e.a,$e.a,[]),a._11(4608,et.a,et.a,[]),a._11(4608,tt.a,tt.a,[b.a]),a._11(4608,rt.a,rt.a,[De.a,b.a,a.u,Ke.a]),a._11(4608,k.a,k.a,[P.a,De.a]),a._11(5120,nt.b,nt.d,[P.a,nt.a]),a._11(5120,qe.a,qe.b,[P.a,nt.b,Je.e,ot.b,a.i]),a._11(4608,S.a,S.a,[P.a,De.a,qe.a]),a._11(4608,at.a,at.a,[P.a,De.a]),a._11(4608,A.a,A.a,[P.a,De.a,qe.a]),a._11(4608,it.a,it.a,[De.a,b.a,Ke.a,P.a,Ve.l]),a._11(4608,w.a,w.a,[P.a,De.a]),a._11(4608,Ge.a,Ge.a,[b.a,De.a]),a._11(4608,st.b,st.a,[]),a._11(4608,ut.a,ut.b,[]),a._11(4608,ct.b,ct.a,[]),a._11(4608,dt.b,dt.a,[]),a._11(4608,lt.a,lt.a,[]),a._11(4608,pt.a,pt.a,[lt.a,st.b,ut.a,ct.b,dt.b,pt.b,pt.c]),a._11(5120,ft.a,ft.c,[ft.b]),a._11(4608,m,m,[]),a._11(4608,y,y,[]),a._11(4608,d.a,d.a,[]),a._11(512,Je.b,Je.b,[]),a._11(512,a.k,ht.a,[]),a._11(256,De.b,{backButtonText:"",pageTransitionDelay:0,swipeBackEnabled:!1,preloadModules:!0},[]),a._11(1024,gt.a,gt.b,[]),a._11(1024,b.a,b.b,[o.b,gt.a,a.u]),a._11(1024,De.a,De.c,[De.b,b.a]),a._11(512,Ke.a,Ke.a,[b.a]),a._11(512,yt.a,yt.a,[]),a._11(512,P.a,P.a,[De.a,b.a,[2,yt.a]]),a._11(512,Ve.l,Ve.l,[P.a]),a._11(256,nt.a,{links:[{loadChildren:"../pages/auth/auth.module.ngfactory#AuthPageModuleNgFactory",name:"AuthPage",segment:"auth",priority:"low",defaultHistory:[]},{loadChildren:"../pages/findpassword/findpassword.module.ngfactory#FindPasswordPageModuleNgFactory",name:"FindPasswordPage",segment:"findpassword",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/addcreditcard/addcreditcard.module.ngfactory#AddCreditCardPageModuleNgFactory",name:"AddCreditCardPage",segment:"addcreditcard",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/adddeposit/adddeposit.module.ngfactory#AddDepositPageModuleNgFactory",name:"AddDepositPage",segment:"adddeposit",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/branchcard/branchcard.module.ngfactory#BranchcardPageModuleNgFactory",name:"BranchcardPage",segment:"branchcard",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/changecards/changecards.module.ngfactory#ChangecardsPageModuleNgFactory",name:"ChangecardsPage",segment:"changecards",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/cardinfor/cardinfor.module.ngfactory#CardInforPageModuleNgFactory",name:"CardInforPage",segment:"cardinfor",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/checkout/checkout.module.ngfactory#CheckoutPageModuleNgFactory",name:"CheckoutPage",segment:"checkout",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/confirminfo/confirminfo.module.ngfactory#ConfirminfoPageModuleNgFactory",name:"ConfirminfoPage",segment:"confirminfo",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/creditcard/creditcard.module.ngfactory#CreditCardPageModuleNgFactory",name:"CreditCardPage",segment:"creditcard",priority:"low",defaultHistory:["CreditCardPage"]},{loadChildren:"../pages/home/finalpay/finalpay.module.ngfactory#FinalpayPageModuleNgFactory",name:"FinalpayPage",segment:"finalpay",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/home.module.ngfactory#HomePageModuleNgFactory",name:"HomePage",segment:"home",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/listofbank/listofbank.module.ngfactory#ListofbankPageModuleNgFactory",name:"ListofbankPage",segment:"listofbank",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/supportbank/supportbank.module.ngfactory#ListofbankPageModuleNgFactory",name:"SupportBankPage",segment:"supportbank",priority:"low",defaultHistory:[]},{loadChildren:"../pages/home/resetpassword/resetpassword.module.ngfactory#ResetPasswordPageModuleNgFactory",name:"ResetPasswordPage",segment:"resetpassword/:mobile/:vcode",priority:"low",defaultHistory:[]},{loadChildren:"../pages/modifypassword/modifypassword.module.ngfactory#ModifyPasswordPageModuleNgFactory",name:"ModifyPasswordPage",segment:"modifypassword",priority:"low",defaultHistory:[]},{loadChildren:"../pages/register/register.module.ngfactory#RegisterPageModuleNgFactory",name:"RegisterPage",segment:"register",priority:"low",defaultHistory:[]},{loadChildren:"../pages/login/login.module.ngfactory#LoginPageModuleNgFactory",name:"LoginPage",segment:"login",priority:"low",defaultHistory:[]},{loadChildren:"../pages/setpassword/setpassword.module.ngfactory#SetPasswordPageModuleNgFactory",name:"SetPasswordPage",segment:"setpassword/:mobile/:code",priority:"low",defaultHistory:[]},{loadChildren:"../pages/start/start.module.ngfactory#StartPageModuleNgFactory",name:"StartPage",segment:"start",priority:"low",defaultHistory:[]},{loadChildren:"../pages/tabs/tabs.module.ngfactory#TabsPageModuleNgFactory",name:"TabsPage",segment:"tabs",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/mycard/mycard.module.ngfactory#MyCardPageModuleNgFactory",name:"MyCardPage",segment:"mycard",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/records/detail/recorddetail.module.ngfactory#OrdersPageModuleNgFactory",name:"OrderDetailPage",segment:"record/detail/:id",priority:"low",defaultHistory:[]},{loadChildren:"../pages/thirdparty/thirdparty.module.ngfactory#ThirdPartyPageModuleNgFactory",name:"ThirdPartyPage",segment:"thirdLogin/:mobile/:key",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/records/records.module.ngfactory#RecordsPageModuleNgFactory",name:"RecordsPage",segment:"records",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/profile/profile.module.ngfactory#UinfoPageModuleNgFactory",name:"ProfilePage",segment:"profile",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/ucenter.module.ngfactory#UcenterPageModuleNgFactory",name:"UcenterPage",segment:"ucenter",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/usetup/usetup.module.ngfactory#UsetupPageModuleNgFactory",name:"UsetupPage",segment:"usetup",priority:"low",defaultHistory:[]},{loadChildren:"../pages/ucenter/VIPmembers/VIPmembers.module.ngfactory#VIPmembersPageModuleNgFactory",name:"VIPmembersPage",segment:"VIPmembers",priority:"low",defaultHistory:[]}]},[]),a._11(512,a.h,a.h,[]),a._11(512,mt.a,mt.a,[a.h]),a._11(1024,ot.b,ot.c,[mt.a,a.o]),a._11(1024,a.c,function(e,t,r,n,a,i,s,u,c,d,l,p,f){return[o.s(e),bt.a(t),$e.b(r,n),it.b(a,i,s,u,c),ot.d(d,l,p,f)]},[[2,a.t],De.a,b.a,Ke.a,De.a,b.a,Ke.a,P.a,Ve.l,De.a,nt.a,ot.b,a.u]),a._11(512,a.d,a.d,[[2,a.c]]),a._11(131584,a.f,a.f,[a.u,a.T,a.o,a.k,a.i,a.d]),a._11(512,a.e,a.e,[a.f]),a._11(512,o.a,o.a,[[3,o.a]]),a._11(512,u.e,u.e,[]),a._11(512,u.d,u.d,[]),a._11(512,be,be,[]),a._11(512,Ze.t,Ze.t,[]),a._11(512,Ze.i,Ze.i,[]),a._11(512,Ze.q,Ze.q,[]),a._11(512,Ye.a,Ye.a,[]),a._11(512,s.a,s.a,[]),a._11(512,c.a,c.a,[]),a._11(512,Ae,Ae,[]),a._11(256,u.m,"XSRF-TOKEN",[]),a._11(256,u.n,"X-XSRF-TOKEN",[]),a._11(256,Je.a,"/",[]),a._11(256,Ce.a,de,[]),a._11(256,pt.c,void 0,[]),a._11(256,pt.b,void 0,[]),a._11(256,ft.b,null,[])])});Object(a.M)(),Object(o.j)().bootstrapModuleFactory(Pt)},30:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n;!function(e){e.UNDEFINED="undefined",e.BOOLEAN=typeof!0,e.NUMBER="number",e.STRING="string",e.OBJECT=typeof{},e.FUNCTION="function";function t(t){return typeof t!==e.UNDEFINED&&null!==t}e.Assigned=t;e.Defined=function(t){return typeof t!==e.UNDEFINED};e.IsNull=function(t){return typeof t!==e.UNDEFINED&&null===t};e.IsBoolean=function(t){return typeof t===e.BOOLEAN};e.IsNumber=function(t,r){return void 0===r&&(r=!0),typeof t===e.NUMBER&&(r||!isNaN(t))};e.IsTrueNaN=function(t){return typeof t===e.NUMBER&&isNaN(t)};function r(t){return typeof t===e.STRING}e.IsString=r;function n(t){switch(typeof t){case e.BOOLEAN:case e.STRING:case e.NUMBER:case e.UNDEFINED:return!0;case e.OBJECT:return null===t}return!1}e.IsPrimitive=n;function o(t){return typeof t===e.FUNCTION}e.IsFunction=o;e.IsObject=function(t,r){return void 0===r&&(r=!1),typeof t===e.OBJECT&&(r||null!==t)};e.IsEmptyObject=function(e,t){return void 0===t&&(t=!1),this.IsObject(e,t)&&"{}"===JSON.stringify(e)};e.IsArrayLike=function(e){return t(e)&&(e instanceof Array||r(e)||!o(e)&&a(e,"length"))};e.ZeroArray=function(e){if(e.fill)e.fill(0);else for(var t=0;t<e.length;t++)e[t]=0};e.ArrayCopy=function(e,t,r,n,o){if(void 0===o&&(o=0),t.subarray&&e.subarray)e.set(t.subarray(r,r+n),o);else for(var a=0;a<n;a++)e[o+a]=t[r+a]};e.NumberOrNaN=function(e){return isNaN(e)?NaN:e};function a(e,r){return t(e)&&!n(e)&&r in e}e.HasMember=a;e.HasMemberOfType=function(e,t,r){return a(e,t)&&typeof e[t]===r};e.Create=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new e(t)};e.Sealed=function(){return function(e){Object.seal(e),Object.seal(e.prototype)}};e.StaticImplements=function(){return function(e){}}}(n||(n={})),Object.freeze(n)},56:function(e,t,r){"use strict";var n=r(1),o=(r(0),r(36),r(17),r(32),r(15)),a=r(30),i=r(66),s=(r(104),r(67)),u=r(214),c=function(){function e(){}return e.formatMobile=function(e){return e.replace(/(\d{3})(\d{4})(\d{4})/,"$1****$3")},e.formatIdCard=function(e){return e.replace(/(\d{5})(\d{5,})(\d{5})/,"$1*****$3")},e.formatRealName=function(e){var t="";if(!a.a.Assigned(e))return t;for(var r=e.substr(-1),n=0;n<e.length-1;n++)t+="*";return""+t+r},e}();r.d(t,"a",function(){return f});var d=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}u((n=n.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},p=r(107),f=function(e){Object(n.__extends)(t,e);function t(t,r,n,a){var i=e.call(this,t)||this;return i.http=t,i.location=r,i.homeService=n,i.domSanitizer=a,i.App=window.App,i.subject=new o.Subject,i}return Object.defineProperty(t.prototype,"currentUser",{get:function(){return this.subject.asObservable()},enumerable:!0,configurable:!0}),t.prototype.updateUser=function(e){this.subject.next(Object.assign({},e))},t.prototype.Login=function(e,t){var r=this;this.SetParam("mobile",e.toString()),this.SetParam("password",this.Md5T(t).toString()),u.a.setLoadingText("登录中"),this.Post("kpay/api/login").subscribe(function(e){e.code===i.a.REQ_OK&&(s.a.setToken(e.data.token),r.GetUserData(),r.homeService.GetCardList(),App.Nav.push(App.pages.creditCardPage))},function(e){console.log(e)})},t.prototype.GetFindPwdData=function(e,t){return this.SetParam("mobile",e.toString()),this.SetParam("veriCode",t),this.Post("kpay/api/checkPwdVeriCode")},t.prototype.GetResetPwdData=function(e){return this.SetParam("mobile",e.toString()),this.Post("kpay/api/getPwdVericode")},t.prototype.GetchangePsdData=function(e,t,r){return this.SetParam("mobile",e.toString()),this.SetParam("password",this.Md5T(t).toString()),this.SetParam("veriCode",r),this.Post("kpay/api/user/changePassword")},t.prototype.getPwdVericode=function(e){return this.SetParam("mobile",e),this.Post("kpay/api/getPwdVericode")},t.prototype.SignIn=function(e,t,r,n){return this.SetParam("mobile",e.toString()),this.SetParam("password",this.Md5T(t).toString()),this.SetParam("veriCode",r),n&&this.SetParam("referee",n),this.Post("kpay/api/register")},t.prototype.GetVerifyCode=function(e){return this.SetParam("mobile",e.toString()),this.Post("kpay/api/getVericode")},t.prototype.CheckVerifyCode=function(e,t){return this.SetParam("mobile",e.toString()),this.SetParam("veriCode",t),this.Post("kpay/api/checkRegVeriCode")},t.prototype.Logout=function(){s.a.removeToken(),App.UserInfo=null,App.DisableHardwareBackButton(),App.Nav.setPages([{page:App.pages.loginPage}])},Object.defineProperty(t.prototype,"IsLogin",{get:function(){return a.a.Assigned(s.a.getToken())},enumerable:!0,configurable:!0}),t.prototype.CheckToken=function(){return d(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return u.a.setShowLoading(!1),[4,this.Post("kpay/api/checkToken").toPromise()];case 1:return[2,e.sent()]}})})},t.prototype.ModifyUserInfo=function(e){var t=this;for(var r in e)this.SetParam(r,e[r]);this.Post("kpay/api/user/modify").subscribe(function(e){e.code===i.a.REQ_OK&&t.GetUserData()})},t.prototype.GetUserData=function(){var e=this;return this.Post("kpay/api/user/info").subscribe(function(t){var r=t.data;a.a.Assigned(r)&&(r.idCardNo=c.formatIdCard(r.idCardNo),r.formatedMobile=c.formatMobile(r.mobile.toString()),r.name=c.formatRealName(r.name),a.a.Assigned(r.avatar)?e.getImage(r.avatar).subscribe(function(t){r.avatar=e.domSanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(t)),e.updateUser(r)}):r.avatar="assets/imgs/user.png",e.updateUser(r))},function(e){console.log(e)})},t.prototype.thirdPartyLogin=function(e,t){var r=this;return s.a.setMobile(e),s.a.setSecret(t),this.SetParam("mobile",e),this.SetParam("key",t),u.a.setLoadingText("登录中"),this.Post("kpay/api/login/partner").subscribe(function(e){a.a.Assigned(e.data)&&!a.a.IsEmptyObject(e.data)?(s.a.setToken(e.data.token),r.GetUserData(),r.homeService.GetCardList(),App.Nav.setRoot(App.pages.creditCardPage)):App.Nav.setRoot(App.pages.loginPage)},function(e){console.error(e)})},t.prototype.thirdPartyReLogin=function(){var e=s.a.getMobile(),t=s.a.getSecret();this.thirdPartyLogin(e,t)},t.prototype.shouldPassThrough=function(){return p.indexOf(["/register","/login","/findpassword","/home","/tabs/0/home","/thirdlogin"],decodeURIComponent(this.location.path()).toLocaleLowerCase())>-1},t}(i.a)},66:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r(36),o=r(132),a=r(289),i=(r.n(a),r(30)),s=r(67),u=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}u((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},d="https://h5.5ucardpay.com",l=function(){function e(e){this.http=e,this.responseType="json",this.headers=new n.g({"Content-Type":"application/x-www-form-urlencoded"}),this.params=new o.b}return Object.defineProperty(e.prototype,"BaseUrl",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getToken",{get:function(){var e=s.a.getToken();return i.a.Assigned(e)?"Bearer "+e:""},enumerable:!0,configurable:!0}),e.prototype.SetHeader=function(e,t){this.headers.set(e,t)},e.prototype.Md5T=function(e){return a.Md5.hashStr(e.toString())},e.prototype.Get=function(e){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.http.get(d+"/"+e,{headers:this.headers})];case 1:return[2,t.sent()]}})})},e.prototype.Post=function(e,t){var r=d+"/"+e,n=this.params.toString(),o=this.responseType;return this.SetResponseType("json"),this.setNewParams(),this.http.post(r,n,{headers:this.headers,responseType:o})},e.prototype.SetParam=function(e,t){this.params.has(e)?this.params.set(e,t):this.params.append(e,t)},e.prototype.SetResponseType=function(e){this.responseType=e},e.prototype.setNewParams=function(){this.params=new o.b},e.prototype.getImage=function(e){return this.SetParam("fileId",e),this.SetResponseType("blob"),this.Post("kpay/api/image/show")},e.REQ_OK=1,e.REQ_FAIL=0,e.SESSION_TIMEOUT=2,e}()},67:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){function e(){}return e.setToken=function(t){localStorage.setItem(e.tokenKey,t)},e.setMobile=function(t){localStorage.setItem(e.mobileKey,t)},e.setSecret=function(t){localStorage.setItem(e.secretKey,t)},e.getToken=function(){return localStorage.getItem(e.tokenKey)},e.removeToken=function(){return localStorage.removeItem(e.tokenKey)},e.getMobile=function(){return localStorage.getItem(e.mobileKey)},e.getSecret=function(){return localStorage.getItem(e.secretKey)},e.tokenKey="token",e.mobileKey="mobile",e.secretKey="third_party_secret",e}()}},[270]);